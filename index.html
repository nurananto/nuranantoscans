<!doctype html>
<html lang="id">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- Content Security Policy - Bank-Grade Protection -->
        <!-- CSP Reporting: To enable violation reports, add report-uri https://your-endpoint.com/csp-report -->
        <meta http-equiv="Content-Security-Policy" 
              content="default-src 'self'; 
                       script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://api.anthropic.com; 
                       style-src 'self' 'unsafe-inline'; 
                       img-src 'self' data: https:; 
                       font-src 'self' data:; 
                       connect-src 'self' 
                         https://manga-auth-worker.nuranantoadhien.workers.dev 
                         https://manga-code-validator.nuranantoadhien.workers.dev 
                         https://decrypt-manifest.nuranantoadhien.workers.dev
                         https://script.google.com 
                         https://*.googleusercontent.com 
                         https://raw.githubusercontent.com 
                         https://images.weserv.nl
                         https://api.anthropic.com;
                       form-action 'self' https://manga-auth-worker.nuranantoadhien.workers.dev;
                       frame-ancestors 'none';
                       upgrade-insecure-requests;
                       base-uri 'self';">
        <!-- Security Headers -->
        <meta http-equiv="X-Content-Type-Options" content="nosniff">
        <meta http-equiv="X-Frame-Options" content="DENY">
        <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
        <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=(), payment=(), usb=()">
        <!-- HSTS: Strict-Transport-Security configured in Cloudflare Worker responses -->
        <meta name="robots" content="noindex, nofollow" />
        <meta name="googlebot" content="noindex, nofollow" />
        <meta
            name="description"
            content="Nurananto Scanlation - Baca manga terjemahan bahasa Indonesia gratis"
        />
        <title>Nurananto Scanlation</title>

        <!-- Favicon -->
        <link rel="icon" type="image/x-icon" href="assets/Webicon/favicon.ico" />
        <link rel="icon" type="image/svg+xml" href="assets/Webicon/favicon.svg" />
        <link rel="icon" type="image/png" sizes="96x96" href="assets/Webicon/favicon-96x96.png" />
        <link rel="apple-touch-icon" sizes="180x180" href="assets/Webicon/apple-touch-icon.png" />

        <!-- Preconnect -->
        <link rel="preconnect" href="https://raw.githubusercontent.com" />
        <link rel="dns-prefetch" href="https://raw.githubusercontent.com" />
        <link rel="preconnect" href="https://images.weserv.nl" />
        <link rel="dns-prefetch" href="https://images.weserv.nl" />

        <!-- ✅ FIX: Blocking CSS untuk prevent FOUC saat hard refresh -->
        <link rel="stylesheet" href="style.css?v=f7d92a3" />

        <!-- Critical CSS inline -->
        <!-- Critical CSS inline -->
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                margin: 0;
                padding: 1.25rem;
                padding-bottom: 100px;
                background: #0a0a0a;
                color: #fff;
                /* ✅ FIX: Explicit font-size untuk prevent glitch */
                font-size: 16px;
                font-family:
                    "Rounded Mplus 1c", "M PLUS Rounded 1c", "Varela Round",
                    "Nunito", "Comfortaa", "Quicksand", "Segoe UI", sans-serif;
                /* ✅ FIX: Prevent flash saat CSS ter-load */
                opacity: 1;
                transition: opacity 0.2s ease;
            }

            header {
                max-width: 1400px;
                margin: 0 auto 1.5rem;
                padding: 0;
                background: #0a0a0a;
                box-shadow: none;
                border-bottom: none;
            }

            .header-content {
                max-width: 1400px;
                margin: 0 auto;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .site-logo {
                height: 60px;
                width: auto;
                display: block;
            }

            .header-buttons {
                display: flex;
                gap: 12px;
                align-items: center;
            }

            .github-link-header,
            .facebook-link-header {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 8px 16px;
                border-radius: 8px;
                text-decoration: none;
            }

            .github-link-header {
                background: #24292e;
            }

            .facebook-link-header {
                background: #1877f2;
            }

            .github-icon,
            .facebook-icon {
                width: 24px;
                height: 24px;
            }

            .github-text,
            .facebook-text {
                color: #fff;
                font-weight: 600;
                font-size: 14px;
            }

            .search-section {
                max-width: 1400px;
                margin: 0 auto 2.5rem;
                padding: 0;
            }

            .manga-list-section {
                max-width: 1400px;
                margin: 0 auto;
                padding: 0;
            }

            .manga-list-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 1rem;
                margin-bottom: 1rem;
                padding: 0;
            }

            .manga-list-heading {
                font-size: clamp(1.5rem, 4vw, 2rem);
                font-weight: 700;
                color: #fff;
                text-transform: uppercase;
                letter-spacing: 1px;
                margin: 0;
                padding: 0;
                flex-shrink: 0;
                line-height: 1;
            }

            #searchInput {
                width: 100%;
                padding: 0.75rem 1.25rem;
                font-size: 1rem;
                border-radius: 12px;
                border: 2px solid rgba(255, 255, 255, 0.1);
                outline: none;
                background: #222;
                color: #fff;
            }

            #searchInput::placeholder {
                color: #888;
            }

            .manga-list-container {
                display: flex;
                gap: 0;
                padding: 0;
                max-width: 1400px;
                margin: 0 auto;
                overflow-x: auto;
                overflow-y: hidden;
                scroll-snap-type: x mandatory;
                scroll-behavior: smooth;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                -ms-overflow-style: none;
                cursor: grab;
                user-select: none;
            }

            .manga-list-container.is-dragging {
                cursor: grabbing;
                scroll-snap-type: none;
            }

            .manga-list-container::-webkit-scrollbar {
                display: none;
            }

            .manga-list-page {
                flex: 0 0 100%;
                display: grid;
                grid-template-columns: repeat(5, 1fr);
                gap: 1rem;
                padding: 0.5rem;
                scroll-snap-align: start;
                align-content: start;
            }

            .pagination-container {
                display: flex;
                flex-direction: row;
                justify-content: center;
                align-items: center;
                gap: 8px;
                margin-top: 1rem;
                padding: 0.5rem;
                flex-wrap: wrap;
            }

            #paginationDots {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: 8px;
                flex-shrink: 0;
            }

            .pagination-dot {
                min-width: 32px;
                height: 32px;
                border-radius: 6px;
                background: rgba(255, 255, 255, 0.1);
                color: #fff;
                cursor: pointer;
                transition: all 0.3s ease;
                border: 1px solid rgba(255, 255, 255, 0.2);
                padding: 0 8px;
                font-size: 14px;
                font-weight: 600;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .pagination-dot:hover {
                background: rgba(255, 255, 255, 0.2);
                transform: translateY(-2px);
            }

            .pagination-dot.active {
                background: #1877f2;
                color: #fff;
                border-color: #1877f2;
            }

            .pagination-ellipsis {
                color: rgba(255, 255, 255, 0.5);
                padding: 0 4px;
                font-weight: bold;
                user-select: none;
            }

            .pagination-nav {
                background: transparent;
                border: none;
                color: #fff;
                width: 32px;
                height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 18px;
                font-weight: bold;
            }

            .pagination-nav:hover {
                color: #1877f2;
                transform: scale(1.2);
            }

            .pagination-nav:disabled {
                opacity: 0.3;
                cursor: not-allowed;
            }

            .pagination-nav:disabled:hover {
                transform: none;
                color: #fff;
            }

            .empty-state {
                width: 100%;
                min-height: 300px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
                padding: 2rem;
            }

            .empty-state p {
                margin: 0.5rem 0;
            }

            /* ✅ FIXED: Background & Shadow Transparent */
            .manga-card {
                position: relative;
                overflow: hidden;
                background: transparent;
                border-radius: 0.8rem;
                border: 1px solid rgba(255, 255, 255, 0.15);
                padding: 0.5rem;
                box-shadow: 0 4px 15px rgba(255, 255, 255, 0.05);
                cursor: pointer;
                transition:
                    transform 0.3s ease,
                    box-shadow 0.3s ease;
                display: flex;
                flex-direction: column;
                height: 100%;
                min-height: 0;
            }

            .manga-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 20px rgba(255, 255, 255, 0.1);
            }

            .manga-cover-wrapper {
                position: relative;
                width: 100%;
                overflow: hidden;
                aspect-ratio: 3/4.2;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 0.6rem;
                flex: 0 0 auto;
            }

            /* Type badge di manga card sama seperti trending */
            .manga-cover-wrapper .type-badge {
                bottom: 0;
                right: 0;
                border-radius: 0.6rem 0 0.6rem 0;
            }

            .manga-card img,
            .manga-cover-wrapper img {
                width: 100%;
                max-width: 100%; /* ✅ FIX: Prevent overflow */
                height: 100%; /* ✅ FIX: Fill container height */
                object-fit: cover;
                object-position: center; /* ✅ FIX: Center image untuk better crop */
                border-radius: 0.6rem;
                display: block;
                background: transparent;
                /* ✅ FIX: Prevent image scaling issues */
                image-rendering: -webkit-optimize-contrast;
                image-rendering: crisp-edges;
                image-rendering: auto;
            }

            /* Type Badge Base Styles */
            .type-badge {
                position: absolute;
                bottom: 0;
                right: 0;
                padding: clamp(4px, 1vw, 6px) clamp(8px, 2vw, 12px);
                border-radius: 0.6rem 0 0.6rem 0;
                /* ✅ FIX: Fallback font-size untuk prevent glitch saat hard refresh */
                font-size: 12px; /* Fallback untuk browser yang belum support clamp() */
                font-size: clamp(11px, 2vw, 13px); /* Preferred dengan clamp() */
                font-weight: 700;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                color: #fff;
                z-index: 5;
                pointer-events: none;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
                line-height: 1.2;
                white-space: nowrap;
                display: flex;
                align-items: center;
                gap: clamp(4px, 1vw, 6px);
                /* ✅ FIX: Prevent font-size glitch dengan max-width */
                max-width: 100%;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            /* Badge untuk B/W (Manga Hitam Putih) */
            .type-badge-bw {
                background: #1a1a1a;
                background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            /* Badge untuk Colour (Webtoon Berwarna) */
            .type-badge-colour {
                background: #0d5fcc;
                background: linear-gradient(135deg, #1877f2 0%, #0d5fcc 100%);
                border: 1px solid rgba(255, 255, 255, 0.3);
            }

            /* Badge untuk Novel */
            .type-badge-novel {
                background: #8b5cf6;
                background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
                border: 1px solid rgba(255, 255, 255, 0.3);
            }

            .type-badge-icon {
                width: 14px; /* Fallback */
                width: clamp(12px, 2.5vw, 16px); /* Preferred */
                height: 14px; /* Fallback */
                height: clamp(12px, 2.5vw, 16px); /* Preferred */
                flex-shrink: 0;
                stroke: currentColor;
            }

            .type-badge-text {
                line-height: 1;
                /* ✅ FIX: Prevent text glitch dengan explicit font-size */
                font-size: inherit;
            }

            /* ✅ Status badge di pojok kiri atas (seperti trending badge) */
            .status-badge {
                position: absolute;
                top: 0;
                left: 0;
                padding: 6px 14px;
                border-radius: 0.6rem 0 0.6rem 0;
                font-size: 12px;
                font-weight: 700;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                color: #fff;
                z-index: 2;
                display: flex;
                align-items: center;
                gap: 5px;
                pointer-events: none;
                white-space: nowrap;
            }

            .status-badge-updated {
                background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
                box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
            }

            .status-badge-ongoing {
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
            }

            .status-badge-end {
                background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                box-shadow: 0 2px 8px rgba(239, 68, 68, 0.4);
            }

            .status-badge-hiatus {
                background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
                box-shadow: 0 2px 8px rgba(107, 114, 128, 0.4);
            }

            .badge-icon {
                width: 14px;
                height: 14px;
                flex-shrink: 0;
            }

            /* Mobile responsive untuk status badge */
            @media (max-width: 600px) {
                .status-badge {
                    padding: 2.5px 6px;
                    font-size: 8.5px;
                    gap: 2.5px;
                }
                .badge-icon {
                    width: 9px;
                    height: 9px;
                }
            }

            /* ✅ Title manga - urutan pertama setelah cover */
            .manga-title {
                color: #fff;
                padding: 0.6rem 0.4rem 0;
                text-align: left;
                font-size: 1rem;
                font-weight: 600;
                line-height: 1.4;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                min-height: 1.4em;
                flex: 0 0 auto;
                order: 1;
            }

            /* ✅ Info bar di bawah title - urutan kedua setelah title */
            .manga-info-bar {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0.5rem 0.5rem 0.3rem;
                gap: 0.5rem;
                margin-top: 0;
                flex: 0 0 auto;
                order: 2;
            }

            .manga-chapter {
                color: #fff;
                font-size: 0.75rem;
                font-weight: 700;
            }

            .manga-time {
                color: #888;
                font-size: 0.8rem;
                font-weight: 600;
            }

            .visually-hidden {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border-width: 0;
            }

            .skip-link {
                position: absolute;
                top: -40px;
                left: 0;
                background: #1877f2;
                color: #fff;
                padding: 8px 16px;
                text-decoration: none;
                z-index: 100;
                border-radius: 0 0 4px 0;
            }

            .skip-link:focus {
                top: 0;
            }

            /* Desktop Besar (5 kolom) - 2 rows × 5 = 10 per page */
@media (min-width: 1400px) {
    .manga-list-page {
        flex: 0 0 100%;
        grid-template-columns: repeat(5, 1fr);
        grid-auto-rows: minmax(380px, auto);
        gap: 1rem;
        padding: 0.5rem;
    }
}

/* Desktop Sedang (4 kolom) - 2 rows × 4 = 8 per page */
@media (min-width: 1024px) and (max-width: 1399px) {
    .manga-list-page {
        flex: 0 0 100%;
        grid-template-columns: repeat(4, 1fr);
        grid-auto-rows: minmax(350px, auto);
        gap: 1rem;
        padding: 0.5rem;
    }
}

/* Tablet (3 kolom) - 2 rows × 3 = 6 per page */
@media (min-width: 768px) and (max-width: 1023px) {
    .manga-list-page {
        flex: 0 0 100%;
        grid-template-columns: repeat(3, 1fr);
        grid-auto-rows: minmax(320px, auto);
        gap: 0.875rem;
        padding: 0.5rem;
    }
    .site-logo {
        height: 50px;
    }
    .header-buttons {
        gap: 8px;
    }
    .github-link-header,
    .facebook-link-header {
        padding: 8px 16px;
    }
    .github-icon,
    .facebook-icon {
        width: 24px;
        height: 24px;
    }
    .github-text,
    .facebook-text {
        font-size: 14px;
    }
}

@media (max-width: 767px) {
    body {
        padding: 20px;
        padding-bottom: 110px;
    }
    header {
        margin-bottom: 1rem;
    }
    .site-logo {
        height: 45px;
    }
    .manga-list-page {
        flex: 0 0 100%;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
        padding: 0.5rem;
        grid-auto-rows: minmax(300px, auto);
    }
    .pagination-dot {
        min-width: 28px;
        height: 28px;
        font-size: 13px;
    }
    .pagination-nav {
        width: 28px;
        height: 28px;
        font-size: 16px;
    }
    .search-section {
        padding: 0;
    }
    #searchInput {
        padding: 0.65rem 1rem;
        font-size: 0.95rem;
    }
    /* Hide desktop buttons on mobile - Show login button only */
    .header-buttons {
        display: flex !important;
    }
    .manga-title {
        font-size: 0.875rem;
        padding: 0.5rem 0.4rem 0;
        line-height: 1.4;
    }
    
    .manga-info-bar {
        margin-top: 0.4rem;
        padding: 0 0.5rem 0.3rem;
    }
}

@media (max-width: 480px) {
    body {
        padding: 20px;
        padding-bottom: 105px;
    }
    .site-logo {
        height: 40px;
    }
    .github-link-header,
    .facebook-link-header {
        width: 40px;
        height: 40px;
        min-width: 40px;
        min-height: 40px;
        border-radius: 8px;
    }
    .github-icon,
    .facebook-icon {
        width: 22px;
        height: 22px;
    }
    .manga-list-page {
        grid-auto-rows: minmax(280px, auto); /* ✅ FIX: Smaller minimum height */
    }
    .manga-title {
        font-size: 0.8rem;
        padding: 0.45rem 0.35rem 0;
        line-height: 1.4;
    }
    
    .manga-info-bar {
        margin-top: 0.35rem;
        padding: 0 0.5rem 0.3rem;
    }
}

.loading-indicator {
    text-align: center;
    padding: 40px 20px;
    display: none;
}

.loading-indicator.show {
    display: block;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid #1877f2;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 15px;
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

/* ========================================
   TRENDING SECTION
   ======================================== */
.trending-section {
    max-width: 1400px;
    margin: 0 auto 2.5rem;
    padding: 0;
}

.trending-container {
    display: flex;
    gap: 1.25rem;
    padding: 1rem;
    max-width: 1400px;
    margin: 0 auto;
    overflow-x: auto;
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
    cursor: grab;
    user-select: none;
}

.trending-container.is-dragging {
    cursor: grabbing;
    scroll-snap-type: none;
}

.trending-container::-webkit-scrollbar {
    display: none;
}

.trending-card {
    flex: 0 0 auto;
    width: 300px;
    min-width: 300px;
    max-width: 300px;
    scroll-snap-align: start;
    background: transparent;
    border-radius: 0.8rem;
    border: 1px solid rgba(255, 255, 255, 0.15);
    padding: 0.5rem;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
    display: flex;
    flex-direction: column;
}

.trending-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(255, 255, 255, 0.1);
}

.trending-cover-wrapper {
    position: relative;
    width: 100%;
    aspect-ratio: 3/4.2;
    overflow: hidden;
    border-radius: 0.6rem;
    background: rgba(255, 255, 255, 0.05);
    flex-shrink: 0;
}

.trending-cover-wrapper .type-badge {
    bottom: 0;
    right: 0;
    border-radius: 0.6rem 0 0.6rem 0;
    font-size: 12px;
    font-size: clamp(11px, 2vw, 13px);
}

.trending-cover {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
}

.trending-badge {
    position: absolute;
    top: 0;
    left: 0;
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    color: #fff;
    padding: 6px 14px;
    border-radius: 0.6rem 0 0.6rem 0;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    z-index: 2;
    box-shadow: 0 2px 8px rgba(220, 38, 38, 0.4);
    display: flex;
    align-items: center;
    gap: 5px;
}

.badge-icon {
    width: 12px;
    height: 12px;
    flex-shrink: 0;
}

.trending-title {
    color: #fff;
    font-size: 0.9rem;
    font-weight: 600;
    line-height: 1.4;
    padding: 0.6rem 0.4rem 0;
    text-align: left;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    min-height: 1.4em;
    flex-shrink: 0;
}

.trending-info-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0.4rem 0.3rem;
    gap: 0.5rem;
    margin-top: auto;
}

.trending-chapter {
    color: #fff;
    font-size: 0.85rem;
    font-weight: 700;
}

.trending-views {
    color: #888;
    font-size: 0.8rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 4px;
}

.view-icon {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
    stroke: #888;
}

/* Responsive Trending */
@media (min-width: 1400px) {
    .trending-card {
        width: 300px;
        min-width: 300px;
        max-width: 300px;
    }
}

@media (min-width: 1024px) and (max-width: 1399px) {
    .trending-card {
        width: 285px;
        min-width: 285px;
        max-width: 285px;
    }
}

@media (min-width: 768px) and (max-width: 1023px) {
    .trending-card {
        width: 260px;
        min-width: 260px;
        max-width: 260px;
    }
}

@media (max-width: 767px) {
    .trending-section {
        margin-bottom: 2rem;
    }
    
    .trending-container {
        gap: 0.875rem;
    }
    
    .trending-card {
        width: 220px;
        min-width: 220px;
        max-width: 220px;
    }
    
    .trending-badge {
        font-size: 10px;
        padding: 5px 12px;
    }
    
    .badge-icon {
        width: 12px;
        height: 12px;
    }
    
    .trending-title {
        font-size: 0.8rem;
        padding: 0.5rem 0.3rem 0;
    }
    
    .trending-info-bar {
        padding: 0.4rem 0.3rem 0.2rem;
    }
    
    .trending-chapter {
        font-size: 0.75rem;
    }
    
    .trending-views {
        font-size: 0.7rem;
    }
    
    .view-icon {
        width: 12px;
        height: 12px;
    }
}

@media (max-width: 480px) {
    .trending-card {
        width: 200px;
        min-width: 200px;
        max-width: 200px;
    }
    
    .trending-badge {
        font-size: 9px;
        padding: 4px 10px;
        top: 0;
        left: 0;
    }
    
    .badge-icon {
        width: 11px;
        height: 11px;
    }
    
    .trending-title {
        font-size: 0.75rem;
    }
    
    .trending-chapter {
        font-size: 0.7rem;
    }
    
    .trending-views {
        font-size: 0.65rem;
    }
    
    .view-icon {
        width: 11px;
        height: 11px;
    }
}

@media (max-width: 399px) {
    .trending-card {
        width: 185px;
        min-width: 185px;
        max-width: 185px;
    }
}

@media (max-width: 399px) {
    body {
        padding: 15px;
        padding-bottom: 100px;
    }
    
    .manga-list-page {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.625rem;
        padding: 0.5rem;
        grid-auto-rows: minmax(260px, auto); /* ✅ FIX: Even smaller minimum height */
    }
    
    .manga-card {
        padding: 0.4rem;
    }
    
    .manga-cover-wrapper {
        border-radius: 0.5rem;
    }
    
    .manga-card img,
    .manga-cover-wrapper img {
        border-radius: 0.5rem;
    }
    
    .manga-chapter {
        font-size: 0.65rem;
    }
    
    .manga-time {
        font-size: 0.6rem;
    }
    
    .manga-title {
        font-size: 0.8rem;
        padding: 0.4rem 0.3rem 0;
    }
    
    .manga-info-bar {
        margin-top: 0.3rem;
        padding: 0 0.5rem 0.3rem;
    }
    
    .status-badge {
        font-size: 9px;
        padding: 3px 6px;
    }
    
    .badge-icon {
        width: 10px;
        height: 10px;
    }
    
    .pagination-dot {
        min-width: 26px;
        height: 26px;
        font-size: 12px;
    }
    
    .pagination-nav {
        width: 26px;
        height: 26px;
        font-size: 14px;
    }
    
    #searchInput {
        padding: 0.6rem 0.9rem;
        font-size: 0.9rem;
    }
}

/* Support Container Section */
.support-section {
    max-width: 1400px;
    margin: 0 auto 2rem;
    padding: 0;
}

.support-container {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: clamp(1rem, 2vw, 1.5rem);
    width: 100%;
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    padding: clamp(1rem, 2vw, 1.5rem);
}

.support-button {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: clamp(8px, 1.5vw, 12px);
    padding: clamp(14px, 2vw, 18px) clamp(20px, 3vw, 32px);
    border-radius: clamp(10px, 1.5vw, 14px);
    text-decoration: none;
    font-weight: 700;
    font-size: clamp(14px, 1.8vw, 18px);
    color: #fff;
    transition: all 0.3s ease;
    border: 2px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    flex: 1;
}

.support-button-github {
    background: linear-gradient(135deg, #24292e 0%, #1a1e22 100%);
}

.support-button-github:hover {
    background: linear-gradient(135deg, #2f363d 0%, #24292e 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(36, 41, 46, 0.4);
}

.support-button-facebook {
    background: linear-gradient(135deg, #1877f2 0%, #0d5fcc 100%);
}

.support-button-facebook:hover {
    background: linear-gradient(135deg, #2984f6 0%, #1877f2 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(24, 119, 242, 0.4);
}

.support-button-trakteer {
    background: linear-gradient(135deg, #be1e2d 0%, #d32f2f 100%);
}

.support-button-trakteer:hover {
    background: linear-gradient(135deg, #d32f2f 0%, #be1e2d 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(190, 30, 45, 0.4);
}

.support-icon {
    width: clamp(20px, 2.5vw, 28px);
    height: clamp(20px, 2.5vw, 28px);
    flex-shrink: 0;
}

.support-text {
    white-space: nowrap;
    line-height: 1;
}

.support-text-mobile {
    display: none;
}

/* Tablet Support Container */
@media (min-width: 768px) and (max-width: 1023px) {
    .support-container {
        grid-template-columns: 1fr 1fr 1fr;
    }
    
    .support-button {
        font-size: 14px;
    }
    
    /* Hide "Donasi Chapter", show "Donasi" on tablet */
    .support-button-trakteer .support-text-desktop {
        display: none;
    }
    
    .support-button-trakteer .support-text-mobile {
        display: inline;
    }
}

/* Mobile Support Container */
@media (max-width: 767px) {
    .support-section {
        margin-bottom: 2rem;
    }
    
    .support-container {
        grid-template-columns: 1fr 1fr 1fr;
        gap: 0.875rem;
    }
    
    /* Hide all text on mobile - icon only */
    .support-text,
    .support-text-desktop,
    .support-text-mobile {
        display: none;
    }
    
    .support-button {
        padding: 12px 16px;
        font-size: 13px;
    }
    
    .support-icon {
        width: 20px;
        height: 20px;
    }
}

@media (max-width: 480px) {
    .support-container {
        grid-template-columns: 1fr 1fr 1fr;
    }
    
    .support-button {
        padding: 11px 14px;
        font-size: 12px;
        border-radius: 8px;
    }
    
    .support-icon {
        width: 18px;
        height: 18px;
    }
    
    .support-text {
        font-size: 12px;
    }
}

@media (max-width: 399px) {
    .support-container {
        padding: 0.75rem;
        gap: 0.75rem;
        grid-template-columns: 1fr 1fr 1fr;
    }
    
    .support-button {
        padding: 10px 10px;
        font-size: 10px;
        gap: 5px;
    }
    
    .support-icon {
        width: 16px;
        height: 16px;
    }
    
    .support-text {
        font-size: 10px;
    }
}

/* Notification Tabs Styling */
.notification-tabs {
    display: flex;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(0, 0, 0, 0.2);
}

.notification-tab {
    flex: 1;
    padding: 12px 16px;
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.6);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    border-bottom: 2px solid transparent;
}

.notification-tab:hover {
    background: rgba(255, 255, 255, 0.05);
    color: rgba(255, 255, 255, 0.9);
}

.notification-tab.active {
    color: #1877f2;
    border-bottom-color: #1877f2;
    background: rgba(24, 119, 242, 0.1);
}

.notification-tab svg {
    stroke: currentColor;
}

/* Notification Content Areas */
.notification-content {
    display: none;
}

.notification-content.active {
    display: block;
}

/* Update Item Styling */
.update-item {
    padding: 12px 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    transition: background 0.2s ease;
}

.update-item:last-child {
    border-bottom: none;
}

.update-item:hover {
    background: rgba(255, 255, 255, 0.05);
}

.update-item-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 6px;
}

.update-item-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

.update-item-icon.success {
    stroke: #10b981;
}

.update-item-icon.info {
    stroke: #3b82f6;
}

.update-item-icon.warning {
    stroke: #f59e0b;
}

.update-item-title {
    font-size: 14px;
    font-weight: 600;
    color: #fff;
}

.update-item-description {
    font-size: 13px;
    color: rgba(255, 255, 255, 0.7);
    line-height: 1.5;
    padding-left: 28px;
}

.update-item-time {
    font-size: 11px;
    color: rgba(255, 255, 255, 0.5);
    margin-top: 4px;
    padding-left: 28px;
}

/* Empty State for Updates and Comments */
.notification-empty {
    padding: 32px 16px;
    text-align: center;
    color: rgba(255, 255, 255, 0.5);
}

.notification-empty svg {
    width: 48px;
    height: 48px;
    stroke: rgba(255, 255, 255, 0.3);
    margin-bottom: 12px;
}

.notification-empty p {
    font-size: 14px;
    margin: 0;
}
        </style>
    </head>
    <body>
        <!-- ✅ Skip to main content link -->
        <a href="#main-content" class="skip-link">Skip to main content</a>

        <header role="banner">
            <div class="header-content">
                <a
                    href="https://www.nuranantoscans.my.id"
                    class="logo-link"
                    aria-label="Nurananto Scanlation Home"
                >
                    <img
                        src="assets/logo.png"
                        alt="Nurananto Scanlation Logo"
                        class="site-logo"
                        width="200"
                        height="60"
                    />
                </a>

                <nav aria-label="Social media links">
                    <!-- Desktop: Show all buttons -->
                    <div class="header-buttons">
  <!-- Profile/Login Button -->
  <button class="header-icon-button profile-button" 
          id="btnOpenLogin"
          aria-label="Login or Register">
    <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
      <circle cx="12" cy="7" r="4"/>
    </svg>
    <span class="button-text">Login</span>
  </button>
  
  <!-- Notification Button -->
  <div class="notification-wrapper">
    <button class="header-icon-button notification-button" 
            id="btnNotification"
            aria-label="View notifications">
      <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
      </svg>
      <span class="notification-badge" id="notificationBadge" style="display: none;"></span>
    </button>
    
    <!-- Notification Dropdown -->
    <div class="notification-dropdown" id="notificationDropdown" style="display: none;">
      <div class="notification-header">
        <h3>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
          </svg>
          Notifikasi
        </h3>
        <button id="btnSyncNotifications" class="btn-sync-notif" title="Sync komentar / Refresh update">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
          </svg>
        </button>
      </div>
      
      <!-- Notification Tabs -->
      <div class="notification-tabs">
        <button class="notification-tab active" data-tab="comments">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
          Komentar
        </button>
        <button class="notification-tab" data-tab="updates">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
          Update
        </button>
      </div>
      
      <!-- Comments Content -->
      <div class="notification-content active" id="notificationComments">
        <!-- Comments will be dynamically loaded -->
      </div>
      
      <!-- Updates Content -->
      <div class="notification-content" id="notificationUpdates" style="display: none;">
        <!-- Updates will be dynamically loaded -->
      </div>
    </div>
  </div>
</div>

                    <!-- Mobile: Show Login Button Only (No Hamburger) -->
                </nav>
            </div>
            <div class="header-border"></div>
        </header>

        <!-- Ganti bagian <main> di index.html dengan ini -->

        <main role="main" id="main-content">
            <!-- TRENDING SECTION -->
            <section class="trending-section" aria-labelledby="trending-heading">
                <div class="trending-container" id="trendingContainer" role="list">
                    <!-- Trending cards will be rendered here by JavaScript -->
                </div>
            </section>

            <!-- SUPPORT CONTAINER SECTION -->
            <section class="support-section" aria-labelledby="support-heading">
                <h2 id="support-heading" class="visually-hidden">Support Links</h2>
                <div class="support-container">
                    <a href="https://github.com/nurananto/nuranantoscans" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="support-button support-button-github"
                       aria-label="View source code on GitHub (opens in new tab)">
                        <svg class="support-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        <span class="support-text support-text-desktop">Source</span>
                    </a>
                    
                    <a href="https://web.facebook.com/profile.php?id=61556658895013" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="support-button support-button-facebook"
                       aria-label="Follow Nurananto Scans on Facebook (opens in new tab)">
                        <svg class="support-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                        <span class="support-text support-text-desktop">Facebook</span>
                    </a>
                    
                    <a href="https://trakteer.id/NuranantoScanlation" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="support-button support-button-trakteer"
                       aria-label="Donate to buy RAW chapters on Trakteer (opens in new tab)">
                        <svg class="support-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v12M9 9h6M9 15h6"/>
                        </svg>
                        <span class="support-text support-text-desktop">Donasi Chapter</span>
                        <span class="support-text support-text-mobile">Donasi</span>
                    </a>
                </div>
            </section>

            <!-- MANGA LIST SECTION WITH SEARCH -->
            <section
                class="manga-list-section"
                aria-labelledby="manga-list-heading"
            >
                <!-- Header and Search outside container -->
                <div class="manga-list-header">
                    <h2 id="manga-list-heading" class="manga-list-heading">
                        Manga List
                    </h2>
                    <label for="searchInput" class="visually-hidden"
                        >Search manga by title</label
                    >
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="Cari..."
                        aria-label="Search manga by title"
                        autocomplete="off"
                    />
                </div>

                <!-- Loading indicator -->
                <div
                    id="loadingIndicator"
                    class="loading-indicator"
                    role="status"
                    aria-live="polite"
                >
                    <div class="spinner" aria-hidden="true"></div>
                    <p>Memuat daftar manga...</p>
                </div>

                <!-- Manga List Container -->
                <div class="manga-list-container" id="mangaGrid" role="list">
                    <!-- Manga cards will be rendered here by JavaScript -->
                </div>

                <!-- Pagination Controls -->
                <div class="pagination-container" id="paginationControls" style="display: none;">
                    <button class="pagination-nav" id="prevPage" aria-label="Previous page">‹</button>
                    <div id="paginationDots"></div>
                    <button class="pagination-nav" id="nextPage" aria-label="Next page">›</button>
                </div>
            </section>
        </main>

        <!-- ✅ FOOTER with proper landmark -->
        <footer role="contentinfo" class="main-footer">
            <div class="footer-content">
                <div class="footer-disclaimer">
                    <h3 class="footer-title">Disclaimer</h3>
                    <p class="footer-text">
                        Semua bacaan yang ada di website ini merupakan hasil terjemahan fans <strong>Nurananto Scanlation</strong> bukan terjemahan resmi. 
                        Jangan lupa untuk memberikan dukungan langsung kepada author dengan membeli karya-karya asli mereka melalui link raw yang sudah disediakan.
                    </p>
                    <h3 class="footer-title">Support Author</h3>
                    <p class="footer-text">
                        Beli karya asli untuk mendukung author dan industri manga/komik yang Anda sukai!
                    </p>
                </div>
            </div>
        </footer>

        <!-- ✅ Scripts -->
        <script defer src="common.js?v=2.2.1"></script>
        <script defer src="manga-config.js?v=2.2.1"></script>
        <script defer src="script.js?v=2.2.1"></script>
        <script defer src="auto-reload.js?v=2.2.1"></script>

        <!-- Service Worker Registration -->
        <script>
            /**
             * ✅ Enhanced Service Worker Registration
             * - Aggressive cache clearing on update
             * - Better error handling
             * - No query string in SW URL
             */
            if ("serviceWorker" in navigator) {
                window.addEventListener("load", async () => {
                    try {
                        // ✅ STEP 1: Unregister old SW with query string
                        const regs =
                            await navigator.serviceWorker.getRegistrations();

                        for (const reg of regs) {
                            // If SW has query string in URL, unregister it
                            if (
                                reg.active &&
                                reg.active.scriptURL.includes("?v=")
                            ) {
                                await reg.unregister();

                                // ✅ Clear all caches after unregistering
                                if ("caches" in window) {
                                    const cacheNames = await caches.keys();
                                    await Promise.all(
                                        cacheNames.map((name) =>
                                            caches.delete(name),
                                        ),
                                    );
                                }
                            }
                        }

                        // ✅ STEP 2: Register new SW (NO query string)
                        const registration =
                            await navigator.serviceWorker.register("./sw.js", {
                                updateViaCache: "none",
                                scope: "./",
                            });

                        // ✅ STEP 3: Check for updates immediately
                        registration.update();

                       // ✅ STEP 4: Listen for updates - SMOOTH TRANSITION
registration.addEventListener("updatefound", () => {
    const newWorker = registration.installing;

    newWorker.addEventListener("statechange", () => {
        if (
            newWorker.state === "installed" &&
            navigator.serviceWorker.controller
        ) {
            // Skip waiting & activate immediately
            newWorker.postMessage({ type: 'SKIP_WAITING' });
        }
    });
});

// ✅ STEP 5: Handle controller change - SMOOTH RELOAD
let refreshing = false;
navigator.serviceWorker.addEventListener(
    "controllerchange",
    () => {
        if (!refreshing) {
            refreshing = true;
            
            // Fade out sebelum reload
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 0.3s ease';
            
            setTimeout(() => {
                window.location.reload();
            }, 300);
        }
    },
);
                    } catch (err) {
                        // Only show critical errors
                        console.error("❌ SW registration failed:", err);

                        // ✅ If registration fails, try to clear everything and retry once
                        if (err.name !== "SecurityError") {
                            try {
                                // Unregister all
                                const allRegs =
                                    await navigator.serviceWorker.getRegistrations();
                                await Promise.all(
                                    allRegs.map((reg) => reg.unregister()),
                                );

                                // Clear all caches
                                if ("caches" in window) {
                                    const cacheNames = await caches.keys();
                                    await Promise.all(
                                        cacheNames.map((name) =>
                                            caches.delete(name),
                                        ),
                                    );
                                }
                            } catch (cleanupErr) {
                                console.error("❌ Cleanup failed:", cleanupErr);
                            }
                        }
                    }
                });
            }
        </script>

      <!-- ✅ Login Modal -->
<div id="loginModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="login-modal-title">
  <div class="login-modal-content">
    <!-- ✅ Disclaimer Banner -->
    <div style="background: linear-gradient(135deg, #1877f2 0%, #166fe5 100%); padding: 12px; border-radius: 8px 8px 0 0; text-align: center;">
      <div style="color: white; font-size: 13px; font-weight: 600;">
        🔒 Secure Login - Nurananto Scanlation Web
      </div>
    </div>

    <!-- Tabs -->
    <div class="login-tabs" role="tablist">
      <button class="login-tab active" id="tabLogin" role="tab" aria-selected="true" aria-controls="panelLogin">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M13.8 12H3"/>
        </svg>
        Login
      </button>
      <button class="login-tab" id="tabRegister" role="tab" aria-selected="false" aria-controls="panelRegister">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="8.5" cy="7" r="4"/>
          <line x1="20" y1="8" x2="20" y2="14"/>
          <line x1="23" y1="11" x2="17" y2="11"/>
        </svg>
        Register
      </button>
      <button class="login-tab" id="tabForgot" role="tab" aria-selected="false" aria-controls="panelForgot">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        Forgot
      </button>
    </div>

    <!-- Login Panel -->
    <div class="login-panel active" id="panelLogin" role="tabpanel" aria-labelledby="tabLogin">
      <h2 id="login-modal-title" class="login-title">Selamat Datang</h2>
      <form class="login-form" autocomplete="on" action="javascript:void(0)">
        <div class="form-group">
          <label for="loginEmail">Email</label>
          <input type="email" 
                 id="loginEmail" 
                 name="email"
                 placeholder="you@example.com" 
                 autocomplete="email" 
                 required>
        </div>
        <div class="form-group">
          <label for="loginPassword">Password</label>
          <div class="password-input-wrapper">
            <input type="password" 
                   id="loginPassword" 
                   name="password"
                   placeholder="••••••••" 
                   autocomplete="current-password" 
                   required>
            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
        </div>
        <button type="submit" class="btn-login">Login</button>
        <div class="form-message" id="loginMessage" style="display: none;"></div>
      </form>
    </div>

    <!-- Register Panel -->
    <div class="login-panel" id="panelRegister" role="tabpanel" aria-labelledby="tabRegister">
      <h2 class="login-title">Buat Akun Baru</h2>
      <form class="login-form" autocomplete="on" action="javascript:void(0)">
        <div class="form-group">
          <label for="registerEmail">Email</label>
          <input type="email" 
                 id="registerEmail" 
                 name="email"
                 placeholder="you@example.com" 
                 autocomplete="email" 
                 required>
        </div>
        <div class="form-group">
          <label for="registerPassword">Password</label>
          <div class="password-input-wrapper">
            <input type="password" 
                   id="registerPassword" 
                   name="new-password"
                   placeholder="••••••••" 
                   autocomplete="new-password" 
                   required>
            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
          <div class="password-strength" id="passwordStrength" style="display: none;">
            <div class="strength-bar">
              <div class="strength-fill" id="strengthFill"></div>
            </div>
            <span class="strength-text" id="strengthText"></span>
            <ul class="strength-hints" id="strengthHints"></ul>
          </div>
        </div>
        <div class="form-group">
          <label for="registerConfirm">Confirm Password</label>
          <div class="password-input-wrapper">
            <input type="password" 
                   id="registerConfirm" 
                   name="confirm-password"
                   placeholder="••••••••" 
                   autocomplete="new-password" 
                   required>
            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
          <div class="password-match" id="passwordMatch" style="display: none;"></div>
        </div>
        <button type="submit" class="btn-login">Register</button>
        <div class="form-message" id="registerMessage" style="display: none;"></div>
      </form>
    </div>

    <!-- Forgot Password Panel -->
    <div class="login-panel" id="panelForgot" role="tabpanel" aria-labelledby="tabForgot">
      <h2 class="login-title">Ubah Password</h2>
      <p class="login-subtitle">Masukkan email untuk menerima link reset</p>
      <form class="login-form" id="formForgotPassword" autocomplete="on" action="javascript:void(0)">
        <div class="form-group">
          <label for="forgotEmail">Email</label>
          <input type="email" 
                 id="forgotEmail" 
                 name="email"
                 placeholder="you@example.com" 
                 autocomplete="email" 
                 required>
        </div>
        <p id="forgotError" class="code-error"></p>
        <button type="submit" class="btn-login" id="btnSendReset">Kirim Link Reset</button>
        <div class="form-message" id="forgotMessage" style="display: none;"></div>
      </form>
    </div>
  </div>
</div>

<!-- ✅ Profile Modal (TERPISAH - DI LUAR loginModal) -->
<div id="profileModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true">
  <div class="login-modal-content">
    <div class="profile-content">
      <!-- Avatar -->
      <img src="assets/Logo 2.png" alt="Profile Avatar" class="profile-avatar">
      
      <!-- Username -->
      <h2 id="profileUsername" class="profile-username">Username</h2>
      
      <!-- Status Badge -->
      <div id="statusBadge" class="status-box pembaca-setia">
        <span id="statusText">PEMBACA SETIA</span>
      </div>
      
      <!-- Countdown Timer (only for donatur setia) -->
      <!-- Text akan diupdate oleh JavaScript berdasarkan expiresAt dari API -->
      <div id="countdownBox" class="countdown-box" style="display: none;">
        <span id="countdownText"></span>
      </div>
      
      <!-- Upgrade Button (show for non-donatur) -->
      <button id="btnUpgrade" class="btn-upgrade-profile">
        ⚡ UPGRADE
      </button>
      
      <!-- ✅ History Button -->
      <button id="btnHistory" class="btn-history">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        HISTORY BACA
      </button>
      
      <!-- Logout Button -->
      <button id="btnLogout" class="btn-logout-profile">LOGOUT</button>
    </div>
  </div>
</div>
<div id="upgradeModal" class="modal-overlay" style="display: none;">
  <div class="login-modal-content">
    <div class="upgrade-content">
      <h2 class="upgrade-title">⭐ UPGRADE KE DONATUR SETIA ⭐</h2>
<div class="benefits-list">
  <div class="benefit-item">✅ Akses semua chapter terkunci (locked)</div>
  <div class="benefit-item">✅ Badge DONATUR SETIA di akun Anda</div>
</div>
      
      <div class="upgrade-buttons">
        <button id="btnPanduan" class="upgrade-btn upgrade-btn-panduan">
          📖 PANDUAN WAJIB BACA!
        </button>
        <button id="btnDonasi" class="upgrade-btn upgrade-btn-trakteer">
          Donasi via Trakteer
          <span class="badge-instant">INSTANT</span>
        </button>
        <button id="btnVIPCode" class="upgrade-btn upgrade-btn-code">
          Punya DONATUR CODE?
        </button>
      </div>
      
      <button id="btnCloseUpgrade" class="btn-close-modal">BATAL</button>
    </div>
  </div>
</div>

<!-- Panduan Modal -->
<div id="panduanModal" class="modal-overlay" style="display: none;">
  <div class="login-modal-content">
    <div class="panduan-content">
      <h2 class="panduan-title">⚠️ BACA DULU ⚠️<br>Sebelum Donasi atau Input Code</h2>
      
      <div class="panduan-section">
        <h3 class="panduan-section-title">Donatur Code</h3>
        <ul class="panduan-list">
          <li>Input CODE → Redeem</li>
          <li>Status langsung DONATUR SETIA</li>
          <li>Chapter terkunci langsung terbuka di website</li>
        </ul>
        <p class="panduan-warning">⚠️ CODE TIDAK SELALU ADA<br>Dibagikan di waktu tertentu saja</p>
      </div>

      <div class="panduan-section">
        <h3 class="panduan-section-title">Donasi Lewat Trakteer</h3>
        <p class="panduan-warning-red">(WAJIB DIPAHAMI)</p>
        
        <div class="panduan-subsection">
          <h4 class="panduan-subtitle">✅ Donasi dengan menulis email login nuranantoscans.my.id</h4>
          <p class="panduan-text"><strong>Caranya:</strong></p>
          <ul class="panduan-list">
            <li>Tulis email login nuranantoscans.my.id di Pesan Dukungan Trakteer</li>
            <li>Pesan TIDAK DIPRIVASI (jangan aktifkan pesan privat)</li>
          </ul>
          <p class="panduan-text"><strong>Kekurangan:</strong></p>
          <ul class="panduan-list">
            <li>Email login terlihat oleh user lain</li>
          </ul>
          <p class="panduan-text"><strong>Kelebihan:</strong></p>
          <ul class="panduan-list">
            <li>Status otomatis DONATUR SETIA</li>
            <li>Semua locked chapter bisa dibaca langsung melalui website dan community post trakteer.</li>
          </ul>
        </div>

        <div class="panduan-subsection">
          <h4 class="panduan-subtitle">❌ Donasi tanpa menulis email login nuranantoscans.my.id / pesan dukungan diprivasi</h4>
          <p class="panduan-text"><strong>Kekurangan:</strong></p>
          <ul class="panduan-list">
            <li>Status tidak berubah (Masih Pembaca Setia)</li>
            <li>Status locked chapter di website tidak berubah</li>
            <li>Baca locked chapter harus lewat Community Post Trakteer</li>
            <li>Tidak semua locked chapter tersedia<br>(Webtoon / Longstrip hanya bisa dibaca di website)</li>
          </ul>
          <p class="panduan-text"><strong>Kelebihan:</strong></p>
          <ul class="panduan-list">
            <li>Email login tidak terlihat user lain</li>
          </ul>
        </div>
      </div>

      <button id="btnBackToUpgrade" class="upgrade-btn upgrade-btn-primary" style="width: 100%; margin-top: 8px;">
        ← Kembali ke Upgrade
      </button>
    </div>
  </div>
</div>

<!-- VIP Code Modal -->
<div id="codeModal" class="modal-overlay" style="display: none;">
  <div class="login-modal-content">
    <div class="code-content">
      <h2 class="code-title">Masukkan Donatur Code</h2>
      <form id="formVIPCode">
        <input type="text" id="inputVIPCode" placeholder="Masukkan kode Donatur Anda" required readonly>
        <p id="codeError" class="code-error"></p>
        <div class="code-buttons">
          <!-- ✅ Tombol PASTE (tampil dulu) -->
          <button type="button" id="btnPasteCode" class="btn-primary">
            📋 PASTE CODE
          </button>
          <!-- ✅ Tombol REDEEM (hidden dulu, muncul setelah paste) -->
          <button type="submit" id="btnRedeemCode" class="btn-primary" style="display: none;">
            ⚡ REDEEM CODE
          </button>
          <button type="button" id="btnBackFromCode" class="btn-secondary">BATAL</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- History Modal -->
<div id="historyModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true">
  <div class="login-modal-content">
    <div class="history-content">
      <h2 class="history-title">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        History Baca
      </h2>
      
      <!-- Loading State -->
      <div id="historyLoading" class="history-loading">
        <div class="spinner" aria-hidden="true"></div>
        <p>Memuat history...</p>
      </div>
      
      <!-- History List -->
      <div id="historyList" class="history-list" style="display: none;"></div>
      
      <!-- Empty State -->
      <div id="historyEmpty" class="history-empty" style="display: none;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
          <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
        </svg>
        <p>Belum ada history</p>
        <small>Mulai baca manga untuk melihat history</small>
      </div>
      
      <button id="btnCloseHistory" class="btn-close-history">TUTUP</button>
    </div>
  </div>
</div>
    </body>
</html>
