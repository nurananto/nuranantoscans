<!doctype html>
<html lang="id">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://api.anthropic.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://api.anthropic.com https://script.google.com https://*.googleusercontent.com https://raw.githubusercontent.com https://images.weserv.nl https://manga-auth-worker.nuranantoadhien.workers.dev https://manga-code-validator.nuranantoadhien.workers.dev https://decrypt-manifest.nuranantoadhien.workers.dev;">        <meta http-equiv="X-Content-Type-Options" content="nosniff">
        <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
        <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
        <meta name="robots" content="noindex, nofollow" />
        <meta name="googlebot" content="noindex, nofollow" />
        <meta
            name="description"
            content="Nurananto Scanlation - Baca manga terjemahan bahasa Indonesia gratis"
        />
        <title>Nurananto Scanlation</title>

        <!-- Favicon -->
        <link rel="icon" type="image/png" href="assets/Logo 2.png" />
        <link rel="shortcut icon" type="image/png" href="assets/Logo 2.png" />
        <link rel="apple-touch-icon" href="assets/Logo 2.png" />

        <!-- Preconnect -->
        <link rel="preconnect" href="https://raw.githubusercontent.com" />
        <link rel="dns-prefetch" href="https://raw.githubusercontent.com" />
        <link rel="preconnect" href="https://images.weserv.nl" />
        <link rel="dns-prefetch" href="https://images.weserv.nl" />
        <link rel="preload" href="assets/fire.png" as="image" type="image/png" />

        <!-- ‚úÖ FIX: Blocking CSS untuk prevent FOUC saat hard refresh -->
        <link rel="stylesheet" href="style.css?v=f7d92a3" />

        <!-- Critical CSS inline -->
        <!-- Critical CSS inline -->
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                margin: 0;
                padding: 1.25rem;
                padding-bottom: 100px;
                background: #0a0a0a;
                color: #fff;
                /* ‚úÖ FIX: Explicit font-size untuk prevent glitch */
                font-size: 16px;
                font-family:
                    "Rounded Mplus 1c", "M PLUS Rounded 1c", "Varela Round",
                    "Nunito", "Comfortaa", "Quicksand", "Segoe UI", sans-serif;
                /* ‚úÖ FIX: Prevent flash saat CSS ter-load */
                opacity: 1;
                transition: opacity 0.2s ease;
            }

            header {
                max-width: 1400px;
                margin: 0 auto 1.5rem;
                padding: 0;
                background: #0a0a0a;
                box-shadow: none;
                border-bottom: none;
            }

            .header-content {
                max-width: 1400px;
                margin: 0 auto;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .site-logo {
                height: 60px;
                width: auto;
                display: block;
            }

            .header-buttons {
                display: flex;
                gap: 12px;
                align-items: center;
            }

            .github-link-header,
            .facebook-link-header {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 8px 16px;
                border-radius: 8px;
                text-decoration: none;
            }

            .github-link-header {
                background: #24292e;
            }

            .facebook-link-header {
                background: #1877f2;
            }

            .github-icon,
            .facebook-icon {
                width: 24px;
                height: 24px;
            }

            .github-text,
            .facebook-text {
                color: #fff;
                font-weight: 600;
                font-size: 14px;
            }

            .search-section {
                max-width: 1400px;
                margin: 0 auto 2.5rem;
                padding: 0;
            }

            .manga-list-section {
                max-width: 1400px;
                margin: 0 auto;
                padding: 0;
            }

            .manga-list-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                gap: 1rem;
                margin-bottom: 1.5rem;
                padding: 0;
            }

            .manga-list-heading {
                font-size: clamp(1.5rem, 4vw, 2rem);
                font-weight: 700;
                color: #fff;
                text-transform: uppercase;
                letter-spacing: 1px;
                margin: 0;
                padding: 0;
                flex-shrink: 0;
                line-height: 1;
            }

            #searchInput {
                width: 100%;
                padding: 0.75rem 1.25rem;
                font-size: 1rem;
                border-radius: 12px;
                border: 2px solid rgba(255, 255, 255, 0.1);
                outline: none;
                background: #222;
                color: #fff;
            }

            #searchInput::placeholder {
                color: #888;
            }

            .trakteer-button {
                position: fixed;
                bottom: 30px;
                left: 1.5rem;
                right: 1.5rem;
                z-index: 1000;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
                background: linear-gradient(135deg, #be1e2d 0%, #d32f2f 100%);
                padding: 0.75rem 1.25rem;
                border-radius: 16px;
                text-decoration: none;
                color: #fff;
                font-weight: 700;
                font-size: 0.95rem;
                box-shadow: 0 4px 15px rgba(190, 30, 45, 0.4);
                max-width: calc(1400px - 3rem);
                margin: 0 auto;
            }

            .trakteer-icon {
                width: 28px;
                height: 28px;
            }

            .grid-container {
                display: grid;
                gap: 1.25rem;
                padding: 0;
                max-width: 1400px;
                margin: 0 auto;
            }

            /* ‚úÖ FIXED: Background & Shadow Transparent */
            .manga-card {
                position: relative;
                overflow: visible;
                background: transparent;
                border-radius: 0.8rem;
                border: 1px solid rgba(255, 255, 255, 0.1);
                padding: 0.5rem;
                box-shadow: 0 4px 15px rgba(255, 255, 255, 0.05);
                cursor: pointer;
                transition:
                    transform 0.3s ease,
                    box-shadow 0.3s ease;
                display: flex;
                flex-direction: column;
            }

            .manga-card:hover {
                transform: scale(1.03);
                box-shadow: none;
            }

            .manga-cover-wrapper {
                position: relative;
                width: 100%;
                max-width: 100%; /* ‚úÖ FIX: Prevent overflow */
                overflow: hidden; /* ‚úÖ FIX: Clip image yang overflow */
                order: 1;
                min-width: 0; /* ‚úÖ FIX: Prevent flex shrink issues */
            }

            .manga-card img,
            .manga-cover-wrapper img {
                width: 100%;
                max-width: 100%; /* ‚úÖ FIX: Prevent overflow */
                height: auto; /* ‚úÖ FIX: Maintain aspect ratio fallback */
                aspect-ratio: 3/4.2;
                object-fit: cover;
                object-position: center; /* ‚úÖ FIX: Center image untuk better crop */
                border-radius: 0.6rem;
                display: block;
                background: transparent;
                contain-intrinsic-size: 300px 420px;
                /* ‚úÖ FIX: Prevent image scaling issues */
                image-rendering: -webkit-optimize-contrast;
                image-rendering: crisp-edges;
                image-rendering: auto;
            }

            /* Type Badge Base Styles */
            .type-badge {
                position: absolute;
                bottom: clamp(6px, 1.5vw, 10px);
                right: clamp(6px, 1.5vw, 10px);
                padding: clamp(4px, 1vw, 6px) clamp(8px, 2vw, 12px);
                border-radius: clamp(4px, 1vw, 6px);
                /* ‚úÖ FIX: Fallback font-size untuk prevent glitch saat hard refresh */
                font-size: 11px; /* Fallback untuk browser yang belum support clamp() */
                font-size: clamp(10px, 2vw, 12px); /* Preferred dengan clamp() */
                font-weight: 700;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                color: #fff;
                z-index: 5;
                pointer-events: none;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
                backdrop-filter: blur(4px);
                -webkit-backdrop-filter: blur(4px);
                line-height: 1.2;
                white-space: nowrap;
                display: flex;
                align-items: center;
                gap: clamp(4px, 1vw, 6px);
                /* ‚úÖ FIX: Prevent font-size glitch dengan max-width */
                max-width: 100%;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            /* Badge untuk B/W (Manga Hitam Putih) */
            .type-badge-bw {
                background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            /* Badge untuk Colour (Webtoon Berwarna) */
            .type-badge-colour {
                background: linear-gradient(135deg, #1877f2 0%, #0d5fcc 100%);
                border: 1px solid rgba(255, 255, 255, 0.3);
            }

            .type-badge-icon {
                width: 14px; /* Fallback */
                width: clamp(12px, 2.5vw, 16px); /* Preferred */
                height: 14px; /* Fallback */
                height: clamp(12px, 2.5vw, 16px); /* Preferred */
                flex-shrink: 0;
                stroke: currentColor;
            }

            .type-badge-text {
                line-height: 1;
                /* ‚úÖ FIX: Prevent text glitch dengan explicit font-size */
                font-size: inherit;
            }


            /* Badge container untuk manga list */
            .manga-badges-container {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 8px 0;
                background: transparent;
                border-radius: 0;
                gap: 8px;
                min-height: 50px;
            }

            .manga-title {
                color: #fff;
                padding: 0.4rem 0.5rem 1.2rem;
                text-align: center;
                /* ‚úÖ FIX: Fallback font-size untuk prevent glitch */
                font-size: 0.95rem;
                font-weight: 600;
                line-height: 1.65;
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
                text-overflow: ellipsis;
                word-break: break-word;
            }

            .visually-hidden {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border-width: 0;
            }

            .skip-link {
                position: absolute;
                top: -40px;
                left: 0;
                background: #1877f2;
                color: #fff;
                padding: 8px 16px;
                text-decoration: none;
                z-index: 100;
                border-radius: 0 0 4px 0;
            }

            .skip-link:focus {
                top: 0;
            }

            /* Desktop Besar (5 kolom) */
@media (min-width: 1400px) {
    .grid-container {
        grid-template-columns: repeat(5, 1fr);
    }
}

/* Desktop Sedang (4 kolom) */
@media (min-width: 1024px) and (max-width: 1399px) {
    .grid-container {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* Tablet (3 kolom) */
@media (min-width: 768px) and (max-width: 1023px) {
    .grid-container {
        grid-template-columns: repeat(3, 1fr);
    }
    .site-logo {
        height: 50px;
    }
    .header-buttons {
        gap: 8px;
    }
    .github-link-header,
    .facebook-link-header {
        padding: 8px 16px;
    }
    .github-icon,
    .facebook-icon {
        width: 24px;
        height: 24px;
    }
    .github-text,
    .facebook-text {
        font-size: 14px;
    }
}

@media (max-width: 767px) {
    body {
        padding: 20px;
        padding-bottom: 110px;
    }
    header {
        margin-bottom: 1rem;
    }
    .site-logo {
        height: 45px;
    }
    .grid-container {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.875rem;
    }
    .search-section {
        padding: 0;
    }
    #searchInput {
        padding: 0.65rem 1rem;
        font-size: 0.95rem;
    }
    .trakteer-button {
        left: 0.625rem;
        right: 0.625rem;
        padding: 0.65rem 1rem;
        font-size: 0.85rem;
    }
    .trakteer-icon {
        width: 24px;
        height: 24px;
    }
    /* Hide desktop buttons on mobile */
    .header-buttons {
        display: none !important;
    }
    /* Show hamburger menu on mobile */
    .header-menu-toggle {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
        width: 45px;
        height: 45px;
        background: #3a3a3a;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        flex-shrink: 0;
        position: relative;
        z-index: 10002;
    }
    .header-menu-toggle .header-icon {
        width: 24px;
        height: 24px;
        color: #fff;
        display: block;
    }
    /* Hide dropdown by default on mobile */
    .header-menu-dropdown {
        display: none !important;
        visibility: hidden;
    }
    /* Show dropdown when has .show class */
    .header-menu-dropdown.show {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    .github-link-header,
    .facebook-link-header {
        width: 45px;
        height: 45px;
        min-width: 45px;
        min-height: 45px;
        padding: 0;
        justify-content: center;
        border-radius: 10px;
    }
    .github-icon,
    .facebook-icon {
        width: 24px;
        height: 24px;
    }
    .github-text,
    .facebook-text {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
    }
    .manga-title {
        font-size: 0.8rem;
        padding: 0.5rem 0.4rem 1.3rem;
        line-height: 1.65;
    }
}

@media (max-width: 480px) {
    body {
        padding: 20px;
        padding-bottom: 105px;
    }
    .site-logo {
        height: 40px;
    }
    .header-menu-toggle {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    .header-menu-toggle .header-icon {
        width: 22px;
        height: 22px;
    }
    .github-link-header,
    .facebook-link-header {
        width: 40px;
        height: 40px;
        min-width: 40px;
        min-height: 40px;
        border-radius: 8px;
    }
    .github-icon,
    .facebook-icon {
        width: 22px;
        height: 22px;
    }
    .manga-title {
        font-size: 0.75rem;
        padding: 0.45rem 0.35rem 1.2rem;
    }
}

.loading-indicator {
    text-align: center;
    padding: 40px 20px;
    display: none;
}

.loading-indicator.show {
    display: block;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid #1877f2;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 15px;
}

            .loading-indicator {
                text-align: center;
                padding: 40px 20px;
                display: none;
            }

            .loading-indicator.show {
                display: block;
            }

            .spinner {
                width: 50px;
                height: 50px;
                border: 4px solid #f3f3f3;
                border-top: 4px solid #1877f2;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin: 0 auto 15px;
            }

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

/* Fire Icon - Prevent layout shift */
.fire-icon {
    flex-shrink: 0;
    width: clamp(24px, 5vw, 40px);
    height: clamp(24px, 5vw, 40px);
    object-fit: contain;
}

.fire-icon-left {
    animation: fireFlickerLeft 1.5s ease-in-out infinite;
}

.fire-icon-right {
    animation: fireFlickerRight 1.5s ease-in-out infinite;
}

@keyframes fireFlickerLeft {
    0%, 100% {
        opacity: 1;
        transform: scale(1) rotate(-3deg);
    }
    50% {
        opacity: 0.85;
        transform: scale(1.1) rotate(3deg);
    }
}

@keyframes fireFlickerRight {
    0%, 100% {
        opacity: 1;
        transform: scale(1) rotate(3deg);
    }
    50% {
        opacity: 0.85;
        transform: scale(1.1) rotate(-3deg);
    }
}

.top5-heading {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: clamp(0.5rem, 2vw, 1rem);
}

.heading-text {
    white-space: nowrap;
}

/* Top 5 Section - Prevent flicker & crop */
            /* Top 5 Section - Prevent flicker & crop */
            .top5-section {
                max-width: 1400px;
                margin: 0 auto 3rem;
                padding: 0;
            }

            .top5-heading {
                text-align: center;
                font-size: clamp(1.5rem, 4vw, 2rem);
                font-weight: 700;
                margin-bottom: 1.5rem;
                color: #fff;
                text-transform: uppercase;
                letter-spacing: 1px;
            }

            .top5-badges-container {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 8px 0;
                background: transparent;
                border-radius: 0;
                gap: 10px;
                margin-bottom: 0;
            }

            .top5-container {
                display: flex;
                gap: 1rem;
                overflow-x: auto;
                padding: 15px;
                margin: 0 -15px;
                scroll-behavior: smooth;
            }

            .top5-container::-webkit-scrollbar {
                display: none;
            }

            .top5-card {
                position: relative;
                flex: 0 0 45%;
                background: transparent;
                border-radius: 0.8rem;
                border: 1px solid rgba(255, 255, 255, 0.1);
                padding: 0.5rem;
                box-shadow: 0 4px 15px rgba(255, 255, 255, 0.05);
                cursor: pointer;
                overflow: visible;
                transition: transform 0.3s ease;
            }

            .top5-card:hover {
                transform: scale(1.05);
            }

            .top5-card:focus {
                outline: none;
                transform: scale(1.1);
                z-index: 10;
            }

            .top5-card img {
                width: 100%;
                aspect-ratio: 3/4.2;
                object-fit: cover;
                display: block;
                background: transparent;
                border-radius: 0.6rem;
            }

/* Desktop Besar TOP5 (5 kolom) */
@media (min-width: 1400px) {
    .top5-container {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 1.25rem;
        overflow-x: visible;
        padding: 0;
        margin: 0;
    }
    .top5-card {
        flex: none;
        width: auto;
    }
}

@media (max-width: 767px) {
    .top5-container {
        gap: 0.875rem;
        padding: 15px;
        margin: 0 -15px;
    }
}
        </style>
    </head>
    <body>
        <!-- ‚úÖ Skip to main content link -->
        <a href="#main-content" class="skip-link">Skip to main content</a>

        <header role="banner">
            <div class="header-content">
                <a
                    href="https://www.nuranantoscans.my.id"
                    class="logo-link"
                    aria-label="Nurananto Scanlation Home"
                >
                    <img
                        src="assets/logo.png"
                        alt="Nurananto Scanlation Logo"
                        class="site-logo"
                        width="200"
                        height="60"
                    />
                </a>

                <nav aria-label="Social media links">
                    <!-- Desktop: Show all buttons -->
                    <div class="header-buttons">
  <!-- Profile/Login Button - FIRST -->
  <button class="header-icon-button profile-button" 
          id="btnOpenLogin"
          aria-label="Login or Register">
    <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
      <circle cx="12" cy="7" r="4"/>
    </svg>
  </button>

  <!-- GitHub Link -->
  <a href="https://github.com/nurananto/NuranantoScanlation" 
     target="_blank" 
     rel="noopener noreferrer"
     class="header-icon-button github-button"
     aria-label="View source code on GitHub (opens in new tab)">
    <svg class="header-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
    </svg>
  </a>

  <!-- Facebook Link -->
  <a href="https://web.facebook.com/profile.php?id=61556658895013" 
     target="_blank" 
     rel="noopener noreferrer"
     class="header-icon-button facebook-button"
     aria-label="Follow Nurananto Scanlation on Facebook (opens in new tab)">
    <svg class="header-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
    </svg>
  </a>
</div>

                    <!-- Mobile: Hamburger Menu Button -->
                    <button class="header-menu-toggle" 
                            id="btnHeaderMenu"
                            aria-label="Menu"
                            aria-expanded="false">
                      <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                        <circle cx="12" cy="5" r="1"/>
                        <circle cx="12" cy="12" r="1"/>
                        <circle cx="12" cy="19" r="1"/>
                      </svg>
                    </button>

                    <!-- Mobile: Dropdown Menu -->
                    <div class="header-menu-dropdown" id="headerMenuDropdown">
                      <button class="header-menu-item profile-button" 
                              id="btnOpenLoginMobile"
                              aria-label="Login or Register">
                        <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                          <circle cx="12" cy="7" r="4"/>
                        </svg>
                        <span>Profile / Login</span>
                      </button>

                      <a href="https://github.com/nurananto/NuranantoScanlation" 
                         target="_blank" 
                         rel="noopener noreferrer"
                         class="header-menu-item github-button"
                         aria-label="View source code on GitHub (opens in new tab)">
                        <svg class="header-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        <span>GitHub</span>
                      </a>

                      <a href="https://web.facebook.com/profile.php?id=61556658895013" 
                         target="_blank" 
                         rel="noopener noreferrer"
                         class="header-menu-item facebook-button"
                         aria-label="Follow Nurananto Scanlation on Facebook (opens in new tab)">
                        <svg class="header-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                          <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                        <span>Facebook</span>
                      </a>
                    </div>
                </nav>
            </div>
            <div class="header-border"></div>
        </header>

        <!-- Ganti bagian <main> di index.html dengan ini -->

        <main role="main" id="main-content">
            <!-- TOP 5 MOST VIEWED SECTION -->
            <section class="top5-section" aria-labelledby="top5-heading">
                <h2 id="top5-heading" class="top5-heading">
                    <img
                        src="assets/fire.png"
                        alt=""
                        class="fire-icon fire-icon-left"
                        aria-hidden="true"
                        loading="eager"
                        decoding="sync"
                    />
                    <span class="heading-text">Trending 24 Jam</span>
                    <img
                        src="assets/fire.png"
                        alt=""
                        class="fire-icon fire-icon-right"
                        aria-hidden="true"
                        loading="eager"
                        decoding="sync"
                    />
                </h2>
                <div class="top5-container" id="top5Container" role="list">
                    <!-- Top 5 cards will be rendered here by JavaScript -->
                </div>
            </section>

            <!-- MANGA LIST SECTION WITH SEARCH -->
            <section
                class="manga-list-section"
                aria-labelledby="manga-list-heading"
            >
                <div class="manga-list-header">
                    <h2 id="manga-list-heading" class="manga-list-heading">
                        Manga List
                    </h2>
                    <label for="searchInput" class="visually-hidden"
                        >Search manga by title</label
                    >
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="Cari..."
                        aria-label="Search manga by title"
                        autocomplete="off"
                    />
                </div>

                <!-- Loading indicator -->
                <div
                    id="loadingIndicator"
                    class="loading-indicator"
                    role="status"
                    aria-live="polite"
                >
                    <div class="spinner" aria-hidden="true"></div>
                    <p>Memuat daftar manga...</p>
                </div>

                <!-- Manga Grid -->
                <div class="grid-container" id="mangaGrid" role="list"></div>
            </section>
        </main>

        <!-- ‚úÖ FOOTER with proper landmark -->
        <footer role="contentinfo" class="main-footer">
            <div class="footer-content">
                <div class="footer-disclaimer">
                    <h3 class="footer-title">Disclaimer</h3>
                    <p class="footer-text">
                        Semua bacaan yang ada di website ini merupakan hasil terjemahan fans <strong>Nurananto Scanlation</strong> bukan terjemahan resmi. 
                        Jangan lupa untuk memberikan dukungan langsung kepada author dengan membeli karya-karya asli mereka melalui link raw yang sudah disediakan.
                    </p>
                    <h3 class="footer-title">Support Author</h3>
                    <p class="footer-text">
                        Beli karya asli untuk mendukung author dan industri manga/komik yang Anda sukai!
                    </p>
                </div>
            </div>
            <a
                href="https://trakteer.id/NuranantoScanlation"
                target="_blank"
                rel="noopener noreferrer"
                class="trakteer-button"
                aria-label="Support us on Trakteer - Donate to buy RAW chapters (opens in new tab)"
            >
                <img
                    src="assets/trakteer-icon.png"
                    alt=""
                    class="trakteer-icon"
                    aria-hidden="true"
                />
                <span>Donasi untuk Beli RAW Chapter</span>
            </a>
        </footer>

        <!-- ‚úÖ Scripts -->
        <script defer src="common.js?v=f7d92a3"></script>
        <script defer src="auto-reload.js?v=f7d92a3"></script>
        <script defer src="manga-config.js?v=f7d92a3"></script>
        <script defer src="script.js?v=f7d92a3"></script>

        <!-- Service Worker Registration -->
        <script>
            /**
             * ‚úÖ Enhanced Service Worker Registration
             * - Aggressive cache clearing on update
             * - Better error handling
             * - No query string in SW URL
             */
            if ("serviceWorker" in navigator) {
                window.addEventListener("load", async () => {
                    try {
                        // ‚úÖ STEP 1: Unregister old SW with query string
                        console.log("üîç Checking for old SW...");
                        const regs =
                            await navigator.serviceWorker.getRegistrations();

                        for (const reg of regs) {
                            // If SW has query string in URL, unregister it
                            if (
                                reg.active &&
                                reg.active.scriptURL.includes("?v=")
                            ) {
                                console.log(
                                    "üóëÔ∏è Unregistering old SW with query string:",
                                    reg.active.scriptURL,
                                );
                                await reg.unregister();

                                // ‚úÖ Clear all caches after unregistering
                                if ("caches" in window) {
                                    const cacheNames = await caches.keys();
                                    await Promise.all(
                                        cacheNames.map((name) =>
                                            caches.delete(name),
                                        ),
                                    );
                                    console.log("üóëÔ∏è All caches cleared");
                                }
                            }
                        }

                        // ‚úÖ STEP 2: Register new SW (NO query string)
                        console.log("üìù Registering new SW...");
                        const registration =
                            await navigator.serviceWorker.register("./sw.js", {
                                updateViaCache: "none",
                                scope: "./",
                            });

                        console.log("‚úÖ SW registered:", registration.scope);

                        // ‚úÖ STEP 3: Check for updates immediately
                        registration.update();

                       // ‚úÖ STEP 4: Listen for updates - SMOOTH TRANSITION
registration.addEventListener("updatefound", () => {
    const newWorker = registration.installing;
    console.log("üîÑ New SW installing...");

    newWorker.addEventListener("statechange", () => {
        if (
            newWorker.state === "installed" &&
            navigator.serviceWorker.controller
        ) {
            console.log("‚úÖ New SW ready");
            
            // Skip waiting & activate immediately
            newWorker.postMessage({ type: 'SKIP_WAITING' });
        }
    });
});

// ‚úÖ STEP 5: Handle controller change - SMOOTH RELOAD
let refreshing = false;
navigator.serviceWorker.addEventListener(
    "controllerchange",
    () => {
        if (!refreshing) {
            refreshing = true;
            console.log("üîÑ SW updated");
            
            // Fade out sebelum reload
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 0.3s ease';
            
            setTimeout(() => {
                window.location.reload();
            }, 300);
        }
    },
);
                    } catch (err) {
                        console.error("‚ùå SW registration failed:", err);

                        // ‚úÖ If registration fails, try to clear everything and retry once
                        if (err.name === "SecurityError") {
                            console.warn(
                                "‚ö†Ô∏è SW blocked by security policy (HTTPS required)",
                            );
                        } else {
                            console.log("üîÑ Attempting to recover...");

                            try {
                                // Unregister all
                                const allRegs =
                                    await navigator.serviceWorker.getRegistrations();
                                await Promise.all(
                                    allRegs.map((reg) => reg.unregister()),
                                );

                                // Clear all caches
                                if ("caches" in window) {
                                    const cacheNames = await caches.keys();
                                    await Promise.all(
                                        cacheNames.map((name) =>
                                            caches.delete(name),
                                        ),
                                    );
                                }

                                console.log(
                                    "üóëÔ∏è Cleanup completed, please refresh page",
                                );
                            } catch (cleanupErr) {
                                console.error("‚ùå Cleanup failed:", cleanupErr);
                            }
                        }
                    }
                });
            }
        </script>

      <!-- ‚úÖ Login Modal -->
<div id="loginModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="login-modal-title">
  <div class="login-modal-content">
    <!-- Tabs -->
    <div class="login-tabs" role="tablist">
      <button class="login-tab active" id="tabLogin" role="tab" aria-selected="true" aria-controls="panelLogin">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M13.8 12H3"/>
        </svg>
        Login
      </button>
      <button class="login-tab" id="tabRegister" role="tab" aria-selected="false" aria-controls="panelRegister">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="8.5" cy="7" r="4"/>
          <line x1="20" y1="8" x2="20" y2="14"/>
          <line x1="23" y1="11" x2="17" y2="11"/>
        </svg>
        Register
      </button>
      <button class="login-tab" id="tabForgot" role="tab" aria-selected="false" aria-controls="panelForgot">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        Forgot
      </button>
    </div>

    <!-- Login Panel -->
    <div class="login-panel active" id="panelLogin" role="tabpanel" aria-labelledby="tabLogin">
      <h2 id="login-modal-title" class="login-title">Welcome Back!</h2>
      <form class="login-form">
        <div class="form-group">
          <label for="loginEmail">Email</label>
          <input type="email" id="loginEmail" placeholder="you@example.com" autocomplete="email" required>
        </div>
        <div class="form-group">
          <label for="loginPassword">Password</label>
          <div class="password-input-wrapper">
            <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" required>
            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
        </div>
        <button type="submit" class="btn-login">Login</button>
      </form>
    </div>

    <!-- Register Panel -->
    <div class="login-panel" id="panelRegister" role="tabpanel" aria-labelledby="tabRegister">
      <h2 class="login-title">Create Account</h2>
      <form class="login-form">
        <div class="form-group">
          <label for="registerEmail">Email</label>
          <input type="email" id="registerEmail" placeholder="you@example.com" autocomplete="email" required>
        </div>
        <div class="form-group">
          <label for="registerPassword">Password</label>
          <div class="password-input-wrapper">
            <input type="password" id="registerPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password" required>
            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="form-group">
          <label for="registerConfirm">Confirm Password</label>
          <div class="password-input-wrapper">
            <input type="password" id="registerConfirm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password" required>
            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
        </div>
        <button type="submit" class="btn-login">Register</button>
      </form>
    </div>

    <!-- Forgot Password Panel -->
    <div class="login-panel" id="panelForgot" role="tabpanel" aria-labelledby="tabForgot">
      <h2 class="login-title">Reset Password</h2>
      <p class="login-subtitle">Masukkan email untuk menerima link reset</p>
      <form class="login-form" id="formForgotPassword">
        <div class="form-group">
          <label for="forgotEmail">Email</label>
          <input type="email" id="forgotEmail" placeholder="you@example.com" autocomplete="email" required>
        </div>
        <p id="forgotError" class="code-error"></p>
        <button type="submit" class="btn-login" id="btnSendReset">Kirim Link Reset</button>
      </form>
    </div>
  </div>
</div>

<!-- ‚úÖ Profile Modal (TERPISAH - DI LUAR loginModal) -->
<div id="profileModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true">
  <div class="login-modal-content">
    <div class="profile-content">
      <!-- Avatar -->
      <img src="assets/Logo 2.png" alt="Profile Avatar" class="profile-avatar">
      
      <!-- Username -->
      <h2 id="profileUsername" class="profile-username">Username</h2>
      
      <!-- Status Badge -->
      <div id="statusBadge" class="status-box pembaca-setia">
        <span id="statusText">PEMBACA SETIA</span>
      </div>
      
      <!-- Countdown Timer (only for donatur setia) -->
      <!-- Text akan diupdate oleh JavaScript berdasarkan expiresAt dari API -->
      <div id="countdownBox" class="countdown-box" style="display: none;">
        <span id="countdownText"></span>
      </div>
      
      <!-- Upgrade Button (show for non-donatur) -->
      <button id="btnUpgrade" class="btn-upgrade-profile">
        ‚ö° UPGRADE SEKARANG
      </button>
      
      <!-- ‚úÖ History Button -->
      <button id="btnHistory" class="btn-history">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        HISTORY BACA
      </button>
      
      <!-- Logout Button -->
      <button id="btnLogout" class="btn-logout-profile">LOGOUT</button>
    </div>
  </div>
</div>
<div id="upgradeModal" class="modal-overlay" style="display: none;">
  <div class="login-modal-content">
    <div class="upgrade-content">
      <h2 class="upgrade-title">‚≠ê UPGRADE KE DONATUR SETIA ‚≠ê</h2>
<div class="benefits-list">
  <div class="benefit-item">‚úÖ Akses semua chapter terkunci (locked)</div>
  <div class="benefit-item">‚úÖ Badge DONATUR SETIA di akun Anda</div>
</div>
      
      <div class="upgrade-buttons">
        <button id="btnPanduan" class="upgrade-btn upgrade-btn-panduan">
          üìñ PANDUAN WAJIB BACA!
        </button>
        <button id="btnDonasi" class="upgrade-btn upgrade-btn-trakteer">
          Donasi via Trakteer
          <span class="badge-instant">INSTANT</span>
        </button>
        <button id="btnVIPCode" class="upgrade-btn upgrade-btn-code">
          Punya DONATUR CODE?
        </button>
      </div>
      
      <button id="btnCloseUpgrade" class="btn-close-modal">BATAL</button>
    </div>
  </div>
</div>

<!-- Panduan Modal -->
<div id="panduanModal" class="modal-overlay" style="display: none;">
  <div class="login-modal-content">
    <div class="panduan-content">
      <h2 class="panduan-title">‚ö†Ô∏è BACA DULU ‚ö†Ô∏è<br>Sebelum Donasi atau Input Code</h2>
      
      <div class="panduan-section">
        <h3 class="panduan-section-title">Donatur Code</h3>
        <ul class="panduan-list">
          <li>Input CODE ‚Üí Redeem</li>
          <li>Status langsung DONATUR SETIA</li>
          <li>Chapter terkunci langsung terbuka di website</li>
        </ul>
        <p class="panduan-warning">‚ö†Ô∏è CODE TIDAK SELALU ADA<br>Dibagikan di waktu tertentu saja</p>
      </div>

      <div class="panduan-section">
        <h3 class="panduan-section-title">Donasi Lewat Trakteer</h3>
        <p class="panduan-warning-red">(WAJIB DIPAHAMI)</p>
        
        <div class="panduan-subsection">
          <h4 class="panduan-subtitle">‚úÖ Donasi dengan menulis email login nuranantoscans.my.id</h4>
          <p class="panduan-text"><strong>Caranya:</strong></p>
          <ul class="panduan-list">
            <li>Tulis email login nuranantoscans.my.id di Pesan Dukungan Trakteer</li>
            <li>Pesan TIDAK DIPRIVASI (jangan aktifkan pesan privat)</li>
          </ul>
          <p class="panduan-text"><strong>Kekurangan:</strong></p>
          <ul class="panduan-list">
            <li>Email login terlihat oleh user lain</li>
          </ul>
          <p class="panduan-text"><strong>Kelebihan:</strong></p>
          <ul class="panduan-list">
            <li>Status otomatis DONATUR SETIA</li>
            <li>Semua locked chapter bisa dibaca langsung melalui website dan community post trakteer.</li>
          </ul>
        </div>

        <div class="panduan-subsection">
          <h4 class="panduan-subtitle">‚ùå Donasi tanpa menulis email login nuranantoscans.my.id / pesan dukungan diprivasi</h4>
          <p class="panduan-text"><strong>Kekurangan:</strong></p>
          <ul class="panduan-list">
            <li>Status tidak berubah (Masih Pembaca Setia)</li>
            <li>Status locked chapter di website tidak berubah</li>
            <li>Baca locked chapter harus lewat Community Post Trakteer</li>
            <li>Tidak semua locked chapter tersedia<br>(Webtoon / Longstrip hanya bisa dibaca di website)</li>
          </ul>
          <p class="panduan-text"><strong>Kelebihan:</strong></p>
          <ul class="panduan-list">
            <li>Email login tidak terlihat user lain</li>
          </ul>
        </div>
      </div>

      <button id="btnBackToUpgrade" class="upgrade-btn upgrade-btn-primary" style="width: 100%; margin-top: 8px;">
        ‚Üê Kembali ke Upgrade
      </button>
    </div>
  </div>
</div>

<!-- VIP Code Modal -->
<div id="codeModal" class="modal-overlay" style="display: none;">
  <div class="login-modal-content">
    <div class="code-content">
      <h2 class="code-title">Masukkan Donatur Code</h2>
      <form id="formVIPCode">
        <input type="text" id="inputVIPCode" placeholder="Masukkan kode Donatur Anda" required readonly>
        <p id="codeError" class="code-error"></p>
        <div class="code-buttons">
          <!-- ‚úÖ Tombol PASTE (tampil dulu) -->
          <button type="button" id="btnPasteCode" class="btn-primary">
            üìã PASTE CODE
          </button>
          <!-- ‚úÖ Tombol REDEEM (hidden dulu, muncul setelah paste) -->
          <button type="submit" id="btnRedeemCode" class="btn-primary" style="display: none;">
            ‚ö° REDEEM CODE
          </button>
          <button type="button" id="btnBackFromCode" class="btn-secondary">BATAL</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- History Modal -->
<div id="historyModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true">
  <div class="login-modal-content">
    <div class="history-content">
      <h2 class="history-title">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        History Baca
      </h2>
      
      <!-- Loading State -->
      <div id="historyLoading" class="history-loading">
        <div class="spinner" aria-hidden="true"></div>
        <p>Memuat history...</p>
      </div>
      
      <!-- History List -->
      <div id="historyList" class="history-list" style="display: none;"></div>
      
      <!-- Empty State -->
      <div id="historyEmpty" class="history-empty" style="display: none;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
          <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
        </svg>
        <p>Belum ada history</p>
        <small>Mulai baca manga untuk melihat history</small>
      </div>
      
      <button id="btnCloseHistory" class="btn-close-history">TUTUP</button>
    </div>
  </div>
</div>
    </body>
</html>