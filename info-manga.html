<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" 
          content="default-src 'self'; 
                   script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://api.anthropic.com; 
                   style-src 'self' 'unsafe-inline'; 
                   img-src 'self' data: https:; 
                   font-src 'self' data:; 
                   connect-src 'self' 
                     https://manga-auth-worker.nuranantoadhien.workers.dev 
                     https://manga-code-validator.nuranantoadhien.workers.dev 
                     https://decrypt-manifest.nuranantoadhien.workers.dev
                     https://script.google.com 
                     https://*.googleusercontent.com 
                     https://raw.githubusercontent.com 
                     https://images.weserv.nl
                     https://api.anthropic.com;
                   form-action 'self' https://manga-auth-worker.nuranantoadhien.workers.dev;
                   frame-ancestors 'none';
                   base-uri 'self';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="description" content="Baca komik dan manga terbaru dari Nurananto Scanlation">
    <meta name="keywords" content="manga, komik, scanlation, baca online">
    <meta name="author" content="Nurananto Scanlation">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Nurananto Scanlation">
    <meta name="theme-color" content="#0a0a0a">
    <title>Loading...</title>
    
    <!-- Preload Critical Fonts -->
    <link rel="preload" 
          href="fonts/roboto-v50-latin-regular.woff2" 
          as="font" 
          type="font/woff2" 
          crossorigin>
    <link rel="preload" 
          href="fonts/roboto-v50-latin-500.woff2" 
          as="font" 
          type="font/woff2" 
          crossorigin>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="fonts.css?v=4b51f1b">
    <link rel="stylesheet" href="info-manga.css?v=4b51f1b">
    
    <!-- Preconnect -->
    <link rel="preconnect" href="https://raw.githubusercontent.com">
    <link rel="dns-prefetch" href="https://raw.githubusercontent.com">
    <link rel="preconnect" href="https://images.weserv.nl">
    <link rel="dns-prefetch" href="https://images.weserv.nl">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/Logo 2.png">
    <link rel="shortcut icon" type="image/png" href="assets/Logo 2.png">
    <link rel="apple-touch-icon" href="assets/Logo 2.png">
    
    <!-- Critical CSS -->
    <style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Roboto','Segoe UI','Helvetica Neue',Arial,sans-serif;background-color:#0a0a0a;color:#e4e6eb;padding:20px;line-height:1.6;padding-bottom:100px}header{max-width:1400px;margin:0 auto 1.5rem;padding:0 0}.header-content{display:flex;justify-content:space-between;align-items:center}.site-logo{height:60px;width:auto}.header-buttons{display:flex;gap:12px}.github-link-header,.facebook-link-header{display:flex;align-items:center;gap:8px;padding:8px 16px;border-radius:8px;text-decoration:none}.github-link-header{background:#24292e}.facebook-link-header{background:#1877f2}.github-icon,.facebook-icon{width:24px;height:24px}.github-text,.facebook-text{color:#fff;font-weight:600;font-size:14px}.container{max-width:1400px;margin:0 auto;display:grid;grid-template-columns:320px 1fr;gap:20px}.cover-container{position:relative;width:100%}.manga-cover{width:100%;height:auto;display:block;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.7);contain-intrinsic-size:320px 453px}.title-section-mobile{display:none}.title-section-desktop{display:block}.main-title{font-size:clamp(28px,5vw,42px);font-weight:700;color:#fff;margin-bottom:10px;line-height:1.2;word-wrap:break-word}.subtitle{font-size:clamp(16px,3vw,20px);color:#b0b0b0;margin-bottom:8px;line-height:1.4}.badges-container{display:inline-flex;flex-direction:row;gap:12px;align-items:center;margin-bottom:15px}.views-badge,.rating-badge{height:46px;border:none;border-radius:6px;padding:0 20px;display:flex;align-items:center;justify-content:center;gap:8px}.views-badge{background-color:#dc143c}.rating-badge{background-color:#1877f2}.views-number,.rating-number{font-weight:700;font-size:18px;color:#fff}.star-icon{width:20px;height:20px}.btn-show-details{width:100%;background-color:#5865F2;color:#fff;border:none;padding:12px 20px;font-size:15px;font-weight:600;cursor:pointer;border-radius:6px;display:none;margin-top:10px}.btn-read-first{width:100%;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:14px 20px;font-size:15px;font-weight:700;cursor:pointer;border-radius:6px;text-transform:uppercase;letter-spacing:1px;display:flex;align-items:center;justify-content:center;gap:10px;box-shadow:0 4px 15px rgba(102,126,234,0.4)}.btn-read-outside{display:none}.btn-read-inside{display:flex}.info-box{background-color:#2a2a2a;border:1px solid #3a3a3a;border-radius:4px;padding:12px 20px}.external-links-container{display:grid;grid-template-columns:1fr 1fr;gap:10px}.sidebar-btn{background-color:#242526;color:#fff;border:1px solid #3a3a3a;padding:10px 16px;font-size:14px;font-weight:600;cursor:pointer;border-radius:6px}.description-box,.chapters-box{background-color:#18191a;border:1px solid #2f3336;border-radius:8px;padding:20px;margin-bottom:20px}.section-title{font-size:20px;font-weight:700;color:#fff;margin-bottom:15px;text-transform:uppercase}.trakteer-button{position:fixed;bottom:30px;left:24px;right:24px;z-index:1000;display:flex;align-items:center;justify-content:center;gap:10px;background:linear-gradient(135deg,#be1e2d 0%,#d32f2f 100%);padding:12px 20px;border-radius:16px;text-decoration:none;color:#fff;font-weight:700}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.skip-link{position:absolute;top:-40px;left:0;background:#1877f2;color:#fff;padding:8px 16px;text-decoration:none;z-index:100;border-radius:0 0 4px 0}.skip-link:focus{top:0}@media(max-width:768px){body{padding:20px;padding-bottom:110px}.container{grid-template-columns:1fr;gap:5px}header{margin-bottom:1rem}.site-logo{height:45px}.header-buttons{gap:8px}.github-link-header,.facebook-link-header{height:45px;width:45px;min-width:45px;min-height:45px;padding:0;border-radius:10px}.github-icon,.facebook-icon{width:24px;height:24px}.github-text,.facebook-text{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.title-section-desktop{display:none}.title-section-mobile{display:block;text-align:center}.btn-show-details{display:flex}.btn-read-outside{display:flex}.btn-read-inside{display:none}.main-title{font-size:clamp(22px,6vw,28px)}.subtitle{font-size:clamp(14px,4vw,16px)}}.modal-overlay{display:none}</style>
</head>
<body>
  <!-- Skip to main content link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- HEADER - Using <header> is fine, it's <aside> that causes issues -->
  <header role="banner">
    <div class="header-content">
      <a href="https://www.nuranantoscans.my.id" class="logo-link" aria-label="Nurananto Scanlation Home">
        <img src="assets/logo.png" alt="Nurananto Scanlation Logo" class="site-logo" width="200" height="60">
      </a>

      <nav aria-label="Social media links">
        <!-- Desktop: Show all buttons -->
        <div class="header-buttons">
  <!-- Profile/Login Button -->
  <button class="header-icon-button profile-button" 
          id="btnOpenLogin"
          aria-label="Login or Register">
    <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
      <circle cx="12" cy="7" r="4"/>
    </svg>
    <span class="button-text">Login</span>
  </button>
  
  <!-- Notification Button -->
  <div class="notification-wrapper">
    <button class="header-icon-button notification-button" 
            id="btnNotification"
            aria-label="View notifications">
      <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
      </svg>
      <span class="notification-badge" id="notificationBadge" style="display: none;"></span>
    </button>
    
    <!-- Notification Dropdown -->
    <div class="notification-dropdown" id="notificationDropdown" style="display: none;">
      <div class="notification-header">
        <h3>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
          </svg>
          Notifikasi
        </h3>
        <button id="btnSyncNotifications" class="btn-sync-notif" title="Sync komentar / Refresh update">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
          </svg>
        </button>
      </div>
      
      <!-- Notification Tabs -->
      <div class="notification-tabs">
        <button class="notification-tab active" data-tab="comments">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
          Komentar
        </button>
        <button class="notification-tab" data-tab="updates">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
          Update
        </button>
      </div>
      
      <!-- Comments Content -->
      <div class="notification-content active" id="notificationComments">
        <!-- Comments will be dynamically loaded -->
      </div>
      
      <!-- Updates Content -->
      <div class="notification-content" id="notificationUpdates" style="display: none;">
        <!-- Updates will be dynamically loaded -->
      </div>
    </div>
  </div>
</div>

      <!-- Mobile: Show Login Button Only (No Hamburger) -->
      </nav>
    </div>
    <div class="header-border"></div>
  </header>

  <!-- MAIN content -->
  <main role="main" id="main-content">
    <!-- Main Container - Cover + Info (Desktop Only) -->
    <div class="main-container">
      <!-- Cover Section -->
      <div class="hero-cover">
        <img id="mangaCover" 
             src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='450'%3E%3Crect width='300' height='450' fill='%23f5f5f5'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23999' font-size='16' font-family='Arial'%3ELoading...%3C/text%3E%3C/svg%3E" 
             alt="Manga Cover" 
             class="manga-cover"
             loading="eager"
             fetchpriority="high">
      </div>

      <!-- Info Section -->
      <div class="hero-info">
        <!-- Status Badge & Last Update -->
        <div class="status-update-container">
          <div id="statusBadgeInfo" class="status-badge-info">ONGOING</div>
          <div class="last-update-info">
            <svg class="clock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            <span id="lastUpdateText">Last Update: -</span>
          </div>
        </div>

        <!-- Title -->
        <h1 id="mainTitle" class="main-title">Loading...</h1>
        <p id="subtitle" class="subtitle"></p>

        <!-- Rating Section (Simple) -->
        <div class="manga-rating-box">
          <span class="label-text">RATING MANGA:</span>
          <span class="rating-value-compact">
            <span id="mangaRatingScore">8.0</span>
            <span class="rating-star-compact">‚òÖ</span>
            <span class="rating-count-compact">(<span id="mangaRatingCount">0</span> rating)</span>
          </span>
        </div>

        <!-- Rating Input (for logged-in users who haven't rated) -->
        <div class="rating-input-compact" id="mangaRatingInput" style="display: none;">
          <p class="rating-instruction-compact">Berikan rating Anda:</p>
          <div class="rating-stars-input-compact">
            <span class="star-input-compact" data-value="1">‚òÜ</span>
            <span class="star-input-compact" data-value="2">‚òÜ</span>
            <span class="star-input-compact" data-value="3">‚òÜ</span>
            <span class="star-input-compact" data-value="4">‚òÜ</span>
            <span class="star-input-compact" data-value="5">‚òÜ</span>
            <span class="star-input-compact" data-value="6">‚òÜ</span>
            <span class="star-input-compact" data-value="7">‚òÜ</span>
            <span class="star-input-compact" data-value="8">‚òÜ</span>
            <span class="star-input-compact" data-value="9">‚òÜ</span>
            <span class="star-input-compact" data-value="10">‚òÜ</span>
          </div>
          <button class="btn-submit-rating-compact" id="btnSubmitMangaRating">Kirim Rating</button>
        </div>

        <!-- Author & Artist -->
        <div class="author-artist-container">
          <div class="author-box">
            <span class="label-text">AUTHOR:</span>
            <span id="authorNameDesktop" class="value-text">-</span>
          </div>
          <div class="artist-box">
            <span class="label-text">ARTIST:</span>
            <span id="artistNameDesktop" class="value-text">-</span>
          </div>
        </div>

        <!-- Action Buttons Container -->
        <div class="action-buttons-container">
          <!-- Read Button -->
          <button class="btn-start-reading" id="btnStartReading">
            <svg class="btn-read-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
              <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
            </svg>
            <span>BACA DARI AWAL</span>
          </button>
          
          <!-- Donation Button -->
          <a href="https://trakteer.id/NuranantoScanlation" 
             target="_blank" 
             rel="noopener noreferrer"
             class="btn-donate"
             aria-label="Donasi untuk membeli chapter (opens in new tab)">
            <svg class="btn-donate-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 6v12M9 9h6M9 15h6"/>
            </svg>
            <span>DONASI BELI CHAPTER</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Information Container with Tabs (Desktop Only) -->
    <div class="information-container">
      <!-- Tab Navigation -->
      <div class="tab-navigation" role="tablist">
        <button class="tab-button active" role="tab" aria-selected="true" aria-controls="about-panel" id="about-tab">
          <span>Tentang Bacaan</span>
        </button>
        <button class="tab-button" role="tab" aria-selected="false" aria-controls="chapters-panel" id="chapters-tab">
          <span>Daftar Chapter</span>
        </button>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        <!-- About Panel -->
        <div class="tab-panel active" role="tabpanel" id="about-panel" aria-labelledby="about-tab">
          <!-- Chapters Count -->
          <div class="info-stats">
            <div class="stat-item">
              <div class="stat-label">Banyak Chapter</div>
              <div class="stat-value" id="totalChapters">0 Chapters</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Jumlah Pembaca</div>
              <div class="stat-value" id="totalViewer">0</div>
            </div>
          </div>

          <!-- Genre Tags -->
          <div class="info-box-section genre-box-wrapper">
            <div class="genre-box-header">
              <span class="genre-box-label">GENRE</span>
            </div>
            <div id="genreListInfo" class="genre-tags-info" role="list"></div>
          </div>

          <!-- External Links -->
          <div class="external-links-info">
            <button class="info-btn" id="btnMangadexInfo" aria-label="View alternative reading link">
              <img src="assets/mangadex-logo.png" alt="" class="btn-icon" aria-hidden="true">
              <span>Alternatif Link</span>
            </button>
            <button class="info-btn" id="btnRawInfo" aria-label="View source website">
              <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <circle cx="12" cy="12" r="10"/>
                <line x1="2" y1="12" x2="22" y2="12"/>
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
              </svg>
              <span>Source Web</span>
            </button>
          </div>

          <!-- Details / Sinopsis -->
          <div class="details-section">
            <h3 class="details-heading">Sinopsis Manga</h3>
            <div class="details-introduction">
              <p id="synopsisInfo" class="synopsis-text"></p>
            </div>
          </div>
        </div>

        <!-- Chapters Panel -->
        <div class="tab-panel" role="tabpanel" id="chapters-panel" aria-labelledby="chapters-tab">
          <div id="chapterListInfo" class="chapter-list-info" role="list"></div>
        </div>
      </div>
    </div>

    <!-- Comment Container -->
    <div class="comment-container">
      <div class="comment-header-section">
        <h2 class="comment-heading">Komentar</h2>
        
        <!-- Login Button (shown when not logged in) -->
        <button class="btn-login-comment" id="btnLoginComment">
          <svg class="login-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
          Login untuk Berkomentar
        </button>
      </div>

      <!-- Comment Input Section (for logged-in users) -->
      <div class="comment-input-section" id="commentInputSection" style="display: none;">
        <textarea 
          class="comment-textarea" 
          id="commentTextarea" 
          placeholder="Tulis komentar Anda... (max 500 karakter)"
          maxlength="500"></textarea>
        <div class="comment-input-footer">
          <span class="comment-char-count">
            <span id="commentCharCount">0</span>/500
          </span>
          <button class="btn-submit-comment" id="btnSubmitComment">Kirim Komentar</button>
        </div>
      </div>

      <!-- Comments List -->
      <div class="comments-list" id="commentsList">
        <div class="comment-placeholder">
          <p>Belum ada komentar. Jadilah yang pertama!</p>
        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer role="contentinfo" class="main-footer">
    <div class="footer-content">
      <div class="footer-disclaimer">
        <h3 class="footer-title">Disclaimer</h3>
        <p class="footer-text">
          Semua bacaan yang ada di website ini merupakan hasil terjemahan fans <strong>Nurananto Scanlation</strong> bukan terjemahan resmi. 
          Jangan lupa untuk memberikan dukungan langsung kepada author dengan membeli karya-karya asli mereka melalui link raw yang sudah disediakan.
        </p>
        <h3 class="footer-title">Support Author</h3>
        <p class="footer-text">
          Beli karya asli untuk mendukung author dan industri manga/komik yang Anda sukai!
        </p>
      </div>
    </div>
  </footer>

  <script defer src="common.js?v=2.2.1"></script>
  <script defer src="auto-reload.js?v=2.2.1"></script>
  <script defer src="manga-config.js?v=2.2.1"></script>
  <script defer src="info-manga.js?v=2.2.1"></script>
  
<script>
/**
 * ‚úÖ Enhanced Service Worker Registration
 * - Aggressive cache clearing on update
 * - Better error handling
 * - No query string in SW URL
 */
if ('serviceWorker' in navigator) {
    window.addEventListener('load', async () => {
        try {
            // ‚úÖ STEP 1: Unregister old SW with query string
            // Silent operation - no console logs
            const regs = await navigator.serviceWorker.getRegistrations();
            
            for (const reg of regs) {
                // If SW has query string in URL, unregister it
                if (reg.active && reg.active.scriptURL.includes('?v=')) {
                    await reg.unregister();
                    
                    // ‚úÖ Clear all caches after unregistering
                    if ('caches' in window) {
                        const cacheNames = await caches.keys();
                        await Promise.all(cacheNames.map(name => caches.delete(name)));
                    }
                }
            }
            
            // ‚úÖ STEP 2: Register new SW (NO query string)
            const registration = await navigator.serviceWorker.register('./sw.js', {
                updateViaCache: 'none',
                scope: './'
            });
            
            // ‚úÖ STEP 3: Check for updates immediately
            registration.update();
            
            // ‚úÖ STEP 4: Listen for updates
            registration.addEventListener('updatefound', () => {
                const newWorker = registration.installing;
                
                newWorker.addEventListener('statechange', () => {
                    if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                        
                        // Optional: Show update notification
                        // You can uncomment this to notify users
                        /*
                        if (confirm('New version available! Reload now?')) {
                            window.location.reload();
                        }
                        */
                    }
                });
            });
            
            // ‚úÖ STEP 5: Handle controller change
            let refreshing = false;
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                if (!refreshing) {
                    refreshing = true;
                    console.log('üîÑ SW controller changed, reloading...');
                    window.location.reload();
                }
            });
            
        } catch (err) {
            // Silent error handling - only show critical errors
            console.error('‚ùå SW registration failed:', err);
        }
    });
}
</script>
<!-- ‚úÖ Login Modal -->
<div id="loginModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="login-modal-title">
  <div class="login-modal-content">
    <!-- ‚úÖ Disclaimer Banner -->
    <div style="background: linear-gradient(135deg, #1877f2 0%, #166fe5 100%); padding: 12px; border-radius: 8px 8px 0 0; text-align: center;">
      <div style="color: white; font-size: 13px; font-weight: 600;">
        üîí Secure Login - Nurananto Scanlation Web
      </div>
    </div>

    <!-- Tabs -->
    <div class="login-tabs" role="tablist">
      <button class="login-tab active" id="tabLogin" role="tab" aria-selected="true" aria-controls="panelLogin">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M13.8 12H3"/>
        </svg>
        Login
      </button>
      <button class="login-tab" id="tabRegister" role="tab" aria-selected="false" aria-controls="panelRegister">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="8.5" cy="7" r="4"/>
          <line x1="20" y1="8" x2="20" y2="14"/>
          <line x1="23" y1="11" x2="17" y2="11"/>
        </svg>
        Register
      </button>
      <button class="login-tab" id="tabForgot" role="tab" aria-selected="false" aria-controls="panelForgot">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        Forgot
      </button>
    </div>

    <!-- Login Panel -->
    <div class="login-panel active" id="panelLogin" role="tabpanel" aria-labelledby="tabLogin">
      <h2 id="login-modal-title" class="login-title">Selamat Datang</h2>
      <form class="login-form" autocomplete="on" action="javascript:void(0)">
        <div class="form-group">
          <label for="loginEmail">Email</label>
          <input type="email" 
                 id="loginEmail" 
                 name="email"
                 placeholder="you@example.com" 
                 autocomplete="email" 
                 required>
        </div>
        <div class="form-group">
          <label for="loginPassword">Password</label>
          <div class="password-input-wrapper">
            <input type="password" 
                   id="loginPassword" 
                   name="password"
                   placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" 
                   autocomplete="current-password" 
                   required>
            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
        </div>
        <button type="submit" class="btn-login">Login</button>
        <div class="form-message" id="loginMessage" style="display: none;"></div>
      </form>
    </div>

    <!-- Register Panel -->
    <div class="login-panel" id="panelRegister" role="tabpanel" aria-labelledby="tabRegister">
      <h2 class="login-title">Buat Akun Baru</h2>
      <form class="login-form" autocomplete="on" action="javascript:void(0)">
        <div class="form-group">
          <label for="registerEmail">Email</label>
          <input type="email" 
                 id="registerEmail" 
                 name="email"
                 placeholder="you@example.com" 
                 autocomplete="email" 
                 required>
        </div>
        <div class="form-group">
          <label for="registerPassword">Password</label>
          <div class="password-input-wrapper">
            <input type="password" 
                   id="registerPassword" 
                   name="new-password"
                   placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" 
                   autocomplete="new-password" 
                   required>
            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
          <div class="password-strength" id="passwordStrength" style="display: none;">
            <div class="strength-bar">
              <div class="strength-fill" id="strengthFill"></div>
            </div>
            <span class="strength-text" id="strengthText"></span>
            <ul class="strength-hints" id="strengthHints"></ul>
          </div>
        </div>
        <div class="form-group">
          <label for="registerConfirm">Confirm Password</label>
          <div class="password-input-wrapper">
            <input type="password" 
                   id="registerConfirm" 
                   name="confirm-password"
                   placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" 
                   autocomplete="new-password" 
                   required>
            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
          </div>
          <div class="password-match" id="passwordMatch" style="display: none;"></div>
        </div>
        <button type="submit" class="btn-login">Register</button>
        <div class="form-message" id="registerMessage" style="display: none;"></div>
      </form>
    </div>

    <!-- Forgot Password Panel -->
    <div class="login-panel" id="panelForgot" role="tabpanel" aria-labelledby="tabForgot">
      <h2 class="login-title">Ubah Password</h2>
      <p class="login-subtitle">Masukkan email untuk menerima link reset</p>
      <form class="login-form" id="formForgotPassword" autocomplete="on" action="javascript:void(0)">
        <div class="form-group">
          <label for="forgotEmail">Email</label>
          <input type="email" 
                 id="forgotEmail" 
                 name="email"
                 placeholder="you@example.com" 
                 autocomplete="email" 
                 required>
        </div>
        <p id="forgotError" class="code-error"></p>
        <button type="submit" class="btn-login" id="btnSendReset">Kirim Link Reset</button>
        <div class="form-message" id="forgotMessage" style="display: none;"></div>
      </form>
    </div>
  </div>
</div>

<!-- ‚úÖ Profile Modal (TERPISAH - DI LUAR loginModal) -->
<div id="profileModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true">
  <div class="login-modal-content">
    <div class="profile-content">
      <!-- Avatar -->
      <img src="assets/Logo 2.png" alt="Profile Avatar" class="profile-avatar">
      
      <!-- Username -->
      <h2 id="profileUsername" class="profile-username">Username</h2>
      
      <!-- Status Badge -->
      <div id="statusBadge" class="status-box pembaca-setia">
        <span id="statusText">PEMBACA SETIA</span>
      </div>
      
      <!-- Countdown Timer (only for donatur setia) -->
      <!-- Text akan diupdate oleh JavaScript berdasarkan expiresAt dari API -->
      <div id="countdownBox" class="countdown-box" style="display: none;">
        <span id="countdownText"></span>
      </div>
      
      <!-- Upgrade Button (show for non-donatur) -->
      <button id="btnUpgrade" class="btn-upgrade-profile">
        ‚ö° UPGRADE
      </button>
      
      <!-- ‚úÖ History Button -->
      <button id="btnHistory" class="btn-history">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        HISTORY BACA
      </button>
      
      <!-- Logout Button -->
      <button id="btnLogout" class="btn-logout-profile">LOGOUT</button>
    </div>
  </div>
</div>
<!-- Login Required Modal (untuk user yang belum login) -->
<div id="loginRequiredModal" class="modal-overlay" style="display: none;">
  <div class="login-modal-content">
    <div class="login-required-content">
      <h2 class="login-required-title">üîí Chapter Terkunci üîí</h2>
      <p class="login-required-message login-required-message-primary">
        Chapter Terkunci karena <span class="highlight-text">RAW berbayar</span>.
      </p>
      <p class="login-required-message login-required-message-secondary">
        Locked Chapter bisa dibaca dengan cara
      </p>
      
      <div class="login-required-buttons">
        <button id="btnLoginFromRequired" class="login-required-btn login-required-btn-primary">
          üîê Login dan Jadilah DONATUR SETIA
        </button>
        <a id="btnTrakteerPost" href="https://trakteer.id/NuranantoScanlation/posts" target="_blank" class="login-required-btn login-required-btn-trakteer">
          üìñ Baca di Post Trakteer
        </a>
      </div>
      
      <button id="btnCloseLoginRequired" class="btn-close-modal">BATAL</button>
    </div>
  </div>
</div>

<div id="upgradeModal" class="modal-overlay" style="display: none;">
  <div class="login-modal-content">
    <div class="upgrade-content">
      <h2 class="upgrade-title">‚≠ê UPGRADE KE DONATUR SETIA ‚≠ê</h2>
<div class="benefits-list">
  <div class="benefit-item">‚úÖ Akses semua chapter terkunci (locked)</div>
  <div class="benefit-item">‚úÖ Badge DONATUR SETIA di akun Anda</div>
</div>
      
      <div class="upgrade-buttons">
        <button id="btnPanduan" class="upgrade-btn upgrade-btn-panduan">
          üìñ PANDUAN WAJIB BACA!
        </button>
        <button id="btnDonasi" class="upgrade-btn upgrade-btn-trakteer">
          Donasi via Trakteer
          <span class="badge-instant">INSTANT</span>
        </button>
        <button id="btnVIPCode" class="upgrade-btn upgrade-btn-code">
          Punya DONATUR CODE?
        </button>
      </div>
      
      <button id="btnCloseUpgrade" class="btn-close-modal">BATAL</button>
    </div>
  </div>
</div>

<!-- Panduan Modal -->
<div id="panduanModal" class="modal-overlay" style="display: none;">
  <div class="login-modal-content">
    <div class="panduan-content">
      <h2 class="panduan-title">‚ö†Ô∏è BACA DULU ‚ö†Ô∏è<br>Sebelum Donasi atau Input Code</h2>
      
      <div class="panduan-section">
        <h3 class="panduan-section-title">Donatur Code</h3>
        <ul class="panduan-list">
          <li>Input CODE ‚Üí Redeem</li>
          <li>Status langsung DONATUR SETIA</li>
          <li>Chapter terkunci langsung terbuka di website</li>
        </ul>
        <p class="panduan-warning">‚ö†Ô∏è CODE TIDAK SELALU ADA<br>Dibagikan di waktu tertentu saja</p>
      </div>

      <div class="panduan-section">
        <h3 class="panduan-section-title">Donasi Lewat Trakteer</h3>
        <p class="panduan-warning-red">(WAJIB DIPAHAMI)</p>
        
        <ul class="panduan-list">
          <li>Tuliskan email login pada Pesan Dukungan.</li>
          <li>Pastikan penulisan email benar dan tidak ada typo tulisan apapun.</li>
          <li>JANGAN CENTANG "jadikan pesan private".</li>
        </ul>
        
        <img src="https://raw.githubusercontent.com/nurananto/nuranantoscans/refs/heads/main/assets/Login.webp" alt="Contoh Donasi Trakteer" style="width: 100%; max-width: 500px; margin: 16px auto; display: block; border-radius: 8px; border: 2px solid rgba(255, 255, 255, 0.2);">
      </div>

      <button id="btnBackToUpgrade" class="upgrade-btn upgrade-btn-primary" style="width: 100%; margin-top: 8px;">
        ‚Üê Kembali ke Upgrade
      </button>
    </div>
  </div>
</div>

<!-- VIP Code Modal -->
<div id="codeModal" class="modal-overlay" style="display: none;">
  <div class="login-modal-content">
    <div class="code-content">
      <h2 class="code-title">Masukkan Donatur Code</h2>
      <form id="formVIPCode">
        <input type="text" id="inputVIPCode" placeholder="Masukkan kode Donatur Anda" required readonly>
        <p id="codeError" class="code-error"></p>
        <div class="code-buttons">
          <!-- ‚úÖ Tombol PASTE (tampil dulu) -->
          <button type="button" id="btnPasteCode" class="btn-primary">
            üìã PASTE CODE
          </button>
          <!-- ‚úÖ Tombol REDEEM (hidden dulu, muncul setelah paste) -->
          <button type="submit" id="btnRedeemCode" class="btn-primary" style="display: none;">
            ‚ö° REDEEM CODE
          </button>
          <button type="button" id="btnBackFromCode" class="btn-secondary">BATAL</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- History Modal -->
<div id="historyModal" class="modal-overlay" style="display: none;" role="dialog" aria-modal="true">
  <div class="login-modal-content">
    <div class="history-content">
      <h2 class="history-title">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        History Baca
      </h2>
      
      <!-- Loading State -->
      <div id="historyLoading" class="history-loading">
        <div class="spinner" aria-hidden="true"></div>
        <p>Memuat history...</p>
      </div>
      
      <!-- History List -->
      <div id="historyList" class="history-list" style="display: none;"></div>
      
      <!-- Empty State -->
      <div id="historyEmpty" class="history-empty" style="display: none;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
          <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
        </svg>
        <p>Belum ada history</p>
        <small>Mulai baca manga untuk melihat history</small>
      </div>
      
      <button id="btnCloseHistory" class="btn-close-history">TUTUP</button>
    </div>
  </div>
</div>

<!-- Scripts already loaded at line 380-383, duplicates removed -->
</body>
</html>
